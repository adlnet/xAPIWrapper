<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>xAPIWrapper 1.11.0 Reference</title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="static/prism.css">

        <style type="text/css">
            body {
                position: relative;
            }

            .wrap {
                display: -webkit-flex;
                display: flex;
                padding-top: 20px;
            }

            h1 {
                position: fixed;
                width: 100%;
                z-index: 1000; 
                color: #FFF;
                background-color: #333;
                margin: 0 0 0.3em 0;
                padding: 5px;
                font-size: 20px;
            }

            nav {
                width: 200px;
            }

            .content {
                -webkit-flex: 1;
                flex: 1;
                max-width: 1000px;
            }

            section > .block {
                padding-left: 3em;
            }

            h3 {
                font-size: 28px;
                letter-spacing: 2px;
            }

            h3 em {
                letter-spacing: 0;
                color: #DDD;
            }

            pre code {
                font-family: Courier, monospace !important;
                font-weight: normal;
                color: #222222 !important;
            }

            pre[class*="language-"] {
                margin-top: 0;
                /*padding-top: 0;*/
            }

            #navlist {
                position: fixed;
                top: 40px;
            }

            /* sidebar */
            .bs-docs-sidebar {
                padding-left: 20px;
                margin-top: 20px;
                margin-bottom: 20px;
            }

            /* all links */
            .bs-docs-sidebar .nav>li>a {
                color: #999;
                border-left: 2px solid transparent;
                padding: 4px 20px;
                font-size: 14px;
                font-weight: 400;
            }

            /* nested links */
            .bs-docs-sidebar .nav .nav>li>a {
                padding-top: 1px;
                padding-bottom: 1px;
                padding-left: 30px;
                font-size: 13px;
            }

            /* active & hover links */
            .bs-docs-sidebar .nav>.active>a, 
            .bs-docs-sidebar .nav>li>a:hover, 
            .bs-docs-sidebar .nav>li>a:focus {
                color: #337AB7;                 
                text-decoration: none;          
                background-color: transparent;  
                border-left-color: #337AB7; 
            }
            /* all active links */
            .bs-docs-sidebar .nav>.active>a, 
            .bs-docs-sidebar .nav>.active:hover>a,
            .bs-docs-sidebar .nav>.active:focus>a {
                font-weight: 700;
            }
            /* nested active links */
            .bs-docs-sidebar .nav .nav>.active>a, 
            .bs-docs-sidebar .nav .nav>.active:hover>a,
            .bs-docs-sidebar .nav .nav>.active:focus>a {
                font-weight: 500;
            }

            /* hide inactive nested list */
            .bs-docs-sidebar .nav ul.nav {
                display: none;           
            }
            /* show active nested list */
            .bs-docs-sidebar .nav>.active>ul.nav {
                display: block;           
            }

            .nav-tabs {
                margin-top: 1em;
            }

            .nav-tabs li a {
                padding: 4px 15px;
                font-weight: 700;
            }

            .nav-tabs li.active a {
                border-color: #ccc;
                border-bottom-color: transparent;
                background-color: #f5f2f0;
                color: #333;
            }
            .nav-tabs>li.active>a, .nav-tabs>li.active>a:hover, .nav-tabs>li.active>a:focus {
                background-color: #f5f2f0;
            }

            /*code,*/
            pre {
                /*background-color: #FFF !important;*/
                border-top: none;
                border-top-left-radius: 0;
                border-top-right-radius: 0;
            }

            .table {
                border: none;
                width: auto;
            }
            .table>tbody>tr>td,
            .table>thead>tr>th {
                border: none;
            }
            .table-condensed>thead>tr>th,
            .table-condensed>tbody>tr>td {
                padding: 3px 10px 3px 0;
            }
            section {
                padding-top: 40px;
                margin-top: -45px;
                margin-bottom: 30px;
            }
        </style>

    </head>

    <body data-spy="scroll" data-target="#navlist">

        <h1>xAPIWrapper 1.11.0 Reference</h1>

        <div class="wrap">

            <nav class="bs-docs-sidebar">
                <div id="navlist">
                    <ul class="nav nav-stacked">
                        <li>
                            <a href="#xapistatement"><strong>XAPIstatement</strong></a>
                            <ul class="nav nav-stacked">
                                    <li><a href="#xapistatement-XAPIStatement">XAPIStatement</a></li>
                                    <li><a href="#xapistatement-Agent">Agent</a></li>
                                    <li><a href="#xapistatement-Group">Group</a></li>
                                    <li><a href="#xapistatement-Verb">Verb</a></li>
                                    <li><a href="#xapistatement-Activity">Activity</a></li>
                                    <li><a href="#xapistatement-StatementRef">StatementRef</a></li>
                                    <li><a href="#xapistatement-SubStatement">SubStatement</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#xapiwrapper"><strong>XAPIwrapper</strong></a>
                            <ul class="nav nav-stacked">
                                    <li><a href="#xapiwrapper-Config">Config</a></li>
                                    <li><a href="#xapiwrapper-XAPIWrapper">XAPIWrapper</a></li>
                                    <li><a href="#xapiwrapper-prepareStatement">prepareStatement</a></li>
                                    <li><a href="#xapiwrapper-sendStatement">sendStatement</a></li>
                                    <li><a href="#xapiwrapper-buildMultipartPost">buildMultipartPost</a></li>
                                    <li><a href="#xapiwrapper-sendStatements">sendStatements</a></li>
                                    <li><a href="#xapiwrapper-getStatements">getStatements</a></li>
                                    <li><a href="#xapiwrapper-getActivities">getActivities</a></li>
                                    <li><a href="#xapiwrapper-sendState">sendState</a></li>
                                    <li><a href="#xapiwrapper-getState">getState</a></li>
                                    <li><a href="#xapiwrapper-deleteState">deleteState</a></li>
                                    <li><a href="#xapiwrapper-sendActivityProfile">sendActivityProfile</a></li>
                                    <li><a href="#xapiwrapper-getActivityProfile">getActivityProfile</a></li>
                                    <li><a href="#xapiwrapper-deleteActivityProfile">deleteActivityProfile</a></li>
                                    <li><a href="#xapiwrapper-getAgents">getAgents</a></li>
                                    <li><a href="#xapiwrapper-sendAgentProfile">sendAgentProfile</a></li>
                                    <li><a href="#xapiwrapper-getAgentProfile">getAgentProfile</a></li>
                                    <li><a href="#xapiwrapper-deleteAgentProfile">deleteAgentProfile</a></li>
                                    <li><a href="#xapiwrapper-testConfig">testConfig</a></li>
                                    <li><a href="#xapiwrapper-ie_request">ie_request</a></li>
                                    <li><a href="#xapiwrapper-ruuid">ruuid</a></li>
                                    <li><a href="#xapiwrapper-dateFromISOString">dateFromISOString</a></li>
                                    <li><a href="#xapiwrapper-XHR_request">XHR_request</a></li>
                                    <li><a href="#xapiwrapper-xhrRequestOnError">xhrRequestOnError</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </nav>

            <div class="content">

                    <section id="xapistatement">

                        <h2>XAPIstatement</h2>


                            <section id="xapistatement-XAPIStatement">


                                <h4><a href="#xapistatement-XAPIStatement">XAPIStatement</a> <small> (actor, verb, object)</small></h4>

                                <div class="block">

                                    <p>A convenient JSON-compatible xAPI statement wrapper<br />
All args are optional, but the statement may not be complete or valid<br />
Can also pass an Agent IFI, Verb ID, and an Activity ID in lieu of these args</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>actor</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>The Agent or Group committing the action described by the statement</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>verb</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>The Verb for the action described by the statement</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>object</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>The receiver of the action. An Agent, Group, Activity, SubStatement, or StatementRef</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#XAPIStatement-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="XAPIStatement-example-0">
                                            <pre><code class="language-javascript">var stmt &#x3D; new ADL.XAPIStatement(
    &#x27;mailto:steve.vergenz.ctr@adlnet.gov&#x27;,
   &#x27;http://adlnet.gov/expapi/verbs/launched&#x27;,
   &#x27;http://vwf.adlnet.gov/xapi/virtual_world_sandbox&#x27;
);
&gt;&gt; {
&quot;actor&quot;: {
    &quot;objectType&quot;: &quot;Agent&quot;,
    &quot;mbox&quot;: &quot;mailto:steve.vergenz.ctr@adlnet.gov&quot; },
&quot;verb&quot;: {
    &quot;id&quot;: &quot;http://adlnet.gov/expapi/verbs/launched&quot; },
&quot;object&quot;: {
    &quot;objectType&quot;: &quot;Activity&quot;,
    &quot;id&quot;: &quot;http://vwf.adlnet.gov/xapi/virtual_world_sandbox&quot; },
&quot;result&quot;: {
     &quot;An optional property that represents a measured outcome related to the Statement in which it is included.&quot;}}</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">var XAPIStatement &#x3D; function(actor, verb, object, result)
{

  // initialize

  // if first arg is an xapi statement, parse
  if( actor &amp;&amp; actor.actor &amp;&amp; actor.verb &amp;&amp; actor.object ){
    var stmt &#x3D; actor;
    for(var i in stmt){
      if(i !&#x3D; &#x27;actor&#x27; &amp;&amp; i !&#x3D; &#x27;verb&#x27; &amp;&amp; i !&#x3D; &#x27;object&#x27;)
        this[i] &#x3D; stmt[i];
    }
    actor &#x3D; stmt.actor;
    verb &#x3D; stmt.verb;
    object &#x3D; stmt.object;
  }
  
  if(actor){
    if( actor instanceof Agent )
      this.actor &#x3D; actor;
    else if(actor.objectType &#x3D;&#x3D;&#x3D; &#x27;Agent&#x27; || !actor.objectType)
      this.actor &#x3D; new Agent(actor);
    else if(actor.objectType &#x3D;&#x3D;&#x3D; &#x27;Group&#x27;)
      this.actor &#x3D; new Group(actor);
  }
  else this.actor &#x3D; null;
  
  if(verb){
    if( verb instanceof Verb )
      this.verb &#x3D; verb;
    else
      this.verb &#x3D; new Verb(verb);
  }
  else this.verb &#x3D; null;

  // decide what kind of object was passed
  if(object)
  {
    if( object.objectType &#x3D;&#x3D;&#x3D; &#x27;Activity&#x27; || !object.objectType ){
      if( object instanceof Activity )
        this.object &#x3D; object;
      else
        this.object &#x3D; new Activity(object);
    }
    else if( object.objectType &#x3D;&#x3D;&#x3D; &#x27;Agent&#x27; ){
      if( object instanceof Agent )
        this.object &#x3D; object;
      else
        this.object &#x3D; new Agent(object);
    }
    else if( object.objectType &#x3D;&#x3D;&#x3D; &#x27;Group&#x27; ){
      if( object instanceof Group )
        this.object &#x3D; object;
      else
        this.object &#x3D; new Group(object);
    }
    else if( object.objectType &#x3D;&#x3D;&#x3D; &#x27;StatementRef&#x27; ){
      if( object instanceof StatementRef )
        this.object &#x3D; object;
      else
        this.object &#x3D; new StatementRef(object);
    }
    else if( object.objectType &#x3D;&#x3D;&#x3D; &#x27;SubStatement&#x27; ){
      if( object instanceof SubStatement )
        this.object &#x3D; object;
      else
        this.object &#x3D; new SubStatement(object);
    }
    else this.object &#x3D; null;
  }
  else this.object &#x3D; null;
  
  // add support for result object
  if(result)
  {
     this.result &#x3D; result;
  }

  this.generateId &#x3D; function(){
    this.id &#x3D; ADL.ruuid();
  };
};

XAPIStatement.prototype.toString &#x3D; function(){
  return this.actor.toString() + &quot; &quot; + this.verb.toString() + &quot; &quot; + this.object.toString() + &quot; &quot; + this.result.toString();
};

XAPIStatement.prototype.isValid &#x3D; function(){
  return this.actor &amp;&amp; this.actor.isValid() 
    &amp;&amp; this.verb &amp;&amp; this.verb.isValid() 
    &amp;&amp; this.object &amp;&amp; this.object.isValid()
    &amp;&amp; this.result &amp;&amp; this.result.isValid();
};

XAPIStatement.prototype.generateRegistration &#x3D; function(){
  _getobj(this,&#x27;context&#x27;).registration &#x3D; ADL.ruuid();
};

XAPIStatement.prototype.addParentActivity &#x3D; function(activity){
  _getobj(this,&#x27;context.contextActivities.parent[]&#x27;).push(new Activity(activity));
};

XAPIStatement.prototype.addGroupingActivity &#x3D; function(activity){
  _getobj(this,&#x27;context.contextActivities.grouping[]&#x27;).push(new Activity(activity));
};

XAPIStatement.prototype.addOtherContextActivity &#x3D; function(activity){
  _getobj(this,&#x27;context.contextActivities.other[]&#x27;).push(new Activity(activity));
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapistatement-Agent">


                                <h4><a href="#xapistatement-Agent">Agent</a> <small> (identifier, name)</small></h4>

                                <div class="block">

                                    <p>Provides an easy constructor for xAPI agent objects</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>identifier</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>One of the Inverse Functional Identifiers specified in the spec.     That is, an email, a hashed email, an OpenID, or an account object.<br />
See (https://github.com/adlnet/xAPI-Spec/blob/master/xAPI.md#inversefunctional)</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>name</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>The natural-language name of the agent</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#Agent-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="Agent-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">var Agent &#x3D; function(identifier, name)
{
  this.objectType &#x3D; &#x27;Agent&#x27;;
  this.name &#x3D; name;

  // figure out what type of identifier was given
  if( identifier &amp;&amp; (identifier.mbox || identifier.mbox_sha1sum || identifier.openid || identifier.account) ){
    for(var i in identifier){
      this[i] &#x3D; identifier[i];
    }
  }
  else if( /^mailto:/.test(identifier) ){
    this.mbox &#x3D; identifier;
  }
  else if( /^[0-9a-f]{40}$/i.test(identifier) ){
    this.mbox_sha1sum &#x3D; identifier;
  }
  else if( /^http[s]?:/.test(identifier) ){
    this.openid &#x3D; identifier;
  }
  else if( identifier &amp;&amp; identifier.homePage &amp;&amp; identifier.name ){
    this.account &#x3D; identifier;
  }
};
Agent.prototype.toString &#x3D; function(){
  return this.name || this.mbox || this.openid || this.mbox_sha1sum || this.account.name;
};
Agent.prototype.isValid &#x3D; function()
{
  return this.mbox || this.mbox_sha1sum || this.openid
    || (this.account.homePage &amp;&amp; this.account.name)
    || (this.objectType &#x3D;&#x3D;&#x3D; &#x27;Group&#x27; &amp;&amp; this.member);
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapistatement-Group">


                                <h4><a href="#xapistatement-Group">Group</a> <small> (identifier, members, name)</small></h4>

                                <div class="block">

                                    <p>A type of agent, can contain multiple agents</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>identifier</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>(optional if <code>members</code> specified) See Agent.</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>members</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>An array of Agents describing the membership of the group</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>name</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>The natural-language name of the agent</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#Group-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="Group-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">var Group &#x3D; function(identifier, members, name)
{
  Agent.call(this, identifier, name);
  this.member &#x3D; members;
  this.objectType &#x3D; &#x27;Group&#x27;;
};
Group.prototype &#x3D; new Agent;</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapistatement-Verb">


                                <h4><a href="#xapistatement-Verb">Verb</a> <small> (id, description)</small></h4>

                                <div class="block">

                                    <p>Really only provides a convenient language map</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>id</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>The IRI of the action taken</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>description</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>An English-language description, or a Language Map</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#Verb-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="Verb-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">var Verb &#x3D; function(id, description)
{
  // if passed a verb object then copy and return
  if( id &amp;&amp; id.id ){
    for(var i in id){
      this[i] &#x3D; id[i];
    }
    return;
  }

  // save id and build language map
  this.id &#x3D; id;
  if(description)
  {
    if( typeof(description) &#x3D;&#x3D;&#x3D; &#x27;string&#x27; || description instanceof String ){
      this.display &#x3D; {&#x27;en-US&#x27;: description};
    }
    else {
      this.display &#x3D; description;
    }
  }
};
Verb.prototype.toString &#x3D; function(){
  if(this.display &amp;&amp; (this.display[&#x27;en-US&#x27;] || this.display[&#x27;en&#x27;]))
    return this.display[&#x27;en-US&#x27;] || this.display[&#x27;en&#x27;];
  else
    return this.id;
};
Verb.prototype.isValid &#x3D; function(){
  return this.id;
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapistatement-Activity">


                                <h4><a href="#xapistatement-Activity">Activity</a> <small> (id, name, description)</small></h4>

                                <div class="block">

                                    <p>Describes an object that an agent interacts with</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>id</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>The unique activity IRI</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>name</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>An English-language identifier for the activity, or a Language Map</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>description</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>An English-language description of the activity, or a Language Map</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#Activity-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="Activity-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">var Activity &#x3D; function(id, name, description)
{
  // if first arg is activity, copy everything over
  if(id &amp;&amp; id.id){
    var act &#x3D; id;
    for(var i in act){
      this[i] &#x3D; act[i];
    }
    return;
  }
  
  this.objectType &#x3D; &#x27;Activity&#x27;;
  this.id &#x3D; id;
  if( name || description )
  {
    this.definition &#x3D; {};
    
    if( typeof(name) &#x3D;&#x3D;&#x3D; &#x27;string&#x27; || name instanceof String )
      this.definition.name &#x3D; {&#x27;en-US&#x27;: name};
    else if(name)
      this.definition.name &#x3D; name;
    
    if( typeof(description) &#x3D;&#x3D;&#x3D; &#x27;string&#x27; || description instanceof String )
      this.definition.description &#x3D; {&#x27;en-US&#x27;: description};
    else if(description)
      this.definition.description &#x3D; description;
  }
};
Activity.prototype.toString &#x3D; function(){
  if(this.definition &amp;&amp; this.definition.name &amp;&amp; (this.definition.name[&#x27;en-US&#x27;] || this.definition.name[&#x27;en&#x27;]))
    return this.definition.name[&#x27;en-US&#x27;] || this.definition.name[&#x27;en&#x27;];
  else
    return this.id;
};
Activity.prototype.isValid &#x3D; function(){
  return this.id &amp;&amp; (!this.objectType || this.objectType &#x3D;&#x3D;&#x3D; &#x27;Activity&#x27;);
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapistatement-StatementRef">


                                <h4><a href="#xapistatement-StatementRef">StatementRef</a> <small> (id)</small></h4>

                                <div class="block">

                                    <p>An object that refers to a separate statement</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>id</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>The UUID of another xAPI statement</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#StatementRef-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="StatementRef-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">var StatementRef &#x3D; function(id){
  if(id &amp;&amp; id.id){
    for(var i in id){
      this[i] &#x3D; id[i];
    }
  }
  else {
    this.objectType &#x3D; &#x27;StatementRef&#x27;;
    this.id &#x3D; id;
  }
};
StatementRef.prototype.toString &#x3D; function(){
  return &#x27;statement(&#x27;+this.id+&#x27;)&#x27;;
};
StatementRef.prototype.isValid &#x3D; function(){
  return this.id &amp;&amp; this.objectType &amp;&amp; this.objectType &#x3D;&#x3D;&#x3D; &#x27;StatementRef&#x27;;
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapistatement-SubStatement">


                                <h4><a href="#xapistatement-SubStatement">SubStatement</a> <small> (actor, verb, object)</small></h4>

                                <div class="block">

                                    <p>A self-contained statement as the object of another statement<br />
See XAPIStatement for constructor details</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>actor</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>The Agent or Group committing the action described by the statement</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>verb</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>The Verb for the action described by the statement</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>object</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>The receiver of the action. An Agent, Group, Activity, or StatementRef</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#SubStatement-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="SubStatement-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">var SubStatement &#x3D; function(actor, verb, object){
  XAPIStatement.call(this,actor,verb,object);
  this.objectType &#x3D; &#x27;SubStatement&#x27;;

  delete this.id;
  delete this.stored;
  delete this.version;
  delete this.authority;
};
SubStatement.prototype &#x3D; new XAPIStatement;
SubStatement.prototype.toString &#x3D; function(){
  return &#x27;&quot;&#x27; + SubStatement.prototype.prototype.toString.call(this) + &#x27;&quot;&#x27;;
};

XAPIStatement.Agent &#x3D; Agent;
XAPIStatement.Group &#x3D; Group;
XAPIStatement.Verb &#x3D; Verb;
XAPIStatement.Activity &#x3D; Activity;
XAPIStatement.StatementRef &#x3D; StatementRef;
XAPIStatement.SubStatement &#x3D; SubStatement;
ADL.XAPIStatement &#x3D; XAPIStatement;

}(window.ADL &#x3D; window.ADL || {}));</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>
                    </section>
                    <section id="xapiwrapper">

                        <h2>XAPIwrapper</h2>


                            <section id="xapiwrapper-Config">


                                <h4><a href="#xapiwrapper-Config">Config</a> <small> ()</small></h4>

                                <div class="block">

                                    <p>Config object used w/ url params to configure the lrs object<br />
change these to match your lrs</p>


                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>config object</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#Config-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="Config-example-0">
                                            <pre><code class="language-javascript">var conf &#x3D; {
   &quot;endpoint&quot; : &quot;https://lrs.adlnet.gov/xapi/&quot;,
   &quot;auth&quot; : &quot;Basic &quot; + toBase64(&#x27;tom:1234&#x27;),
};
ADL.XAPIWrapper.changeConfig(conf);</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">var Config &#x3D; function()
{
    var conf &#x3D; {};
    conf[&#x27;endpoint&#x27;] &#x3D; &quot;http://localhost:8000/xapi/&quot;;
    //try
    //{
        conf[&#x27;auth&#x27;] &#x3D; &quot;Basic &quot; + toBase64(&#x27;tom:1234&#x27;);
    //}
    //catch (e)
    //{
    //    log(&quot;Exception in Config trying to encode auth: &quot; + e);
    //}

    // Statement defaults
    // conf[&quot;actor&quot;] &#x3D; {&quot;mbox&quot;:&quot;default@example.com&quot;};
    // conf[&quot;registration&quot;] &#x3D;  ruuid();
    // conf[&quot;grouping&quot;] &#x3D; {&quot;id&quot;:&quot;ctxact:default/grouping&quot;};
    // conf[&quot;activity_platform&quot;] &#x3D; &quot;default platform&quot;;

    // Behavior defaults
    // conf[&quot;strictCallbacks&quot;] &#x3D; false; // Strict error-first callbacks
    return conf
}();</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-XAPIWrapper">


                                <h4><a href="#xapiwrapper-XAPIWrapper">XAPIWrapper</a> <small> (config, verifyxapiversion)</small></h4>

                                <div class="block">

                                    <p>XAPIWrapper Constructor</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>config</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>with a minimum of an endoint property</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>verifyxapiversion</em></td>
                                                <td><span class="label label-primary">boolean</span></td>
                                                <td>
                                                    <p>indicating whether to verify the version of the LRS is compatible with this wrapper</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#XAPIWrapper-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="XAPIWrapper-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">var XAPIWrapper &#x3D; function(config, verifyxapiversion)
{



    this.lrs &#x3D; getLRSObject(config || {});
    if (this.lrs.user &amp;&amp; this.lrs.password)
        updateAuth(this.lrs, this.lrs.user, this.lrs.password);
    this.base &#x3D; getbase(this.lrs.endpoint);

    this.withCredentials &#x3D; false;
    if (config &amp;&amp; typeof(config.withCredentials) !&#x3D; &#x27;undefined&#x27;) {
        this.withCredentials &#x3D; config.withCredentials;
    }

    // Ensure that callbacks are always executed, first param is error (null if no error) followed
    // by the result(s)
    this.strictCallbacks &#x3D; false;
    this.strictCallbacks &#x3D; config &amp;&amp; config.strictCallbacks;

    function getbase(url)
    {
        var l &#x3D; document.createElement(&quot;a&quot;);
        l.href &#x3D; url;
        if (l.protocol &amp;&amp; l.host) {
            return l.protocol + &quot;//&quot; + l.host;
        } else if (l.href) {
            // IE 11 fix.
            var parts &#x3D; l.href.split(&quot;//&quot;);
            return parts[0] + &quot;//&quot; + parts[1].substr(0, parts[1].indexOf(&quot;/&quot;));
        }
        else
            ADL.XAPIWrapper.log(&quot;Couldn&#x27;t create base url from endpoint: &quot; + url);
    }

    function updateAuth(obj, username, password){
        obj.auth &#x3D; &quot;Basic &quot; + toBase64(username + &quot;:&quot; + password);
    }

    if (verifyxapiversion &amp;&amp; testConfig.call(this))
    {
        window.ADL.XHR_request(this.lrs, this.lrs.endpoint+&quot;about&quot;, &quot;GET&quot;, null, null,
            function(r){
                if(r.status &#x3D;&#x3D; 200)
                {
                    try
                    {
                        var lrsabout &#x3D; JSON.parse(r.response);
                        var versionOK &#x3D; false;
                        for (var idx in lrsabout.version)
                        {
                            if (lrsabout.version.hasOwnProperty(idx))
                                if(lrsabout.version[idx] &#x3D;&#x3D; ADL.XAPIWrapper.xapiVersion)
                                {
                                    versionOK &#x3D; true;
                                    break;
                                }
                        }
                        if (!versionOK)
                        {
                            ADL.XAPIWrapper.log(&quot;The lrs version [&quot; + lrsabout.version +&quot;]&quot;+
                                &quot; does not match this wrapper&#x27;s XAPI version [&quot; + ADL.XAPIWrapper.xapiVersion + &quot;]&quot;);
                        }
                    }
                    catch(e)
                    {
                        ADL.XAPIWrapper.log(&quot;The response was not an about object&quot;)
                    }
                }
                else
                {
                    ADL.XAPIWrapper.log(&quot;The request to get information about the LRS failed: &quot; + r);
                }
            }, null, false, null, this.withCredentials, false);


    }

    this.searchParams &#x3D; function(){
        var sp &#x3D; {&quot;format&quot; : &quot;exact&quot;};
        return sp;
    };

    this.hash &#x3D; function(tohash){
        if (!tohash) return null;
        try
        {
            return toSHA1(tohash);
        }
        catch(e)
        {
            ADL.XAPIWrapper.log(&quot;Error trying to hash -- &quot; + e);
            return null;
        }
    };

    this.changeConfig &#x3D; function(config){
        try
        {
            ADL.XAPIWrapper.log(&quot;updating lrs object with new configuration&quot;);
            this.lrs &#x3D; mergeRecursive(this.lrs, config);
            if (config.user &amp;&amp; config.password)
                this.updateAuth(this.lrs, config.user, config.password);
            this.base &#x3D; getbase(this.lrs.endpoint);
            this.withCredentials &#x3D; config.withCredentials;
            this.strictCallbacks &#x3D; config.strictCallbacks;
        }
        catch(e)
        {
            ADL.XAPIWrapper.log(&quot;error while changing configuration -- &quot; + e);
        }
    };

    this.updateAuth &#x3D; updateAuth;
};

// This wrapper is based on the Experience API Spec version:
XAPIWrapper.prototype.xapiVersion &#x3D; &quot;1.0.1&quot;;</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-prepareStatement">


                                <h4><a href="#xapiwrapper-prepareStatement">prepareStatement</a> <small> (stmt)</small></h4>

                                <div class="block">

                                    <p>Adds info from the lrs object to the statement, if available.<br />
These values could be initialized from the Config object or from the url query string.</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>stmt</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>the statement object</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#prepareStatement-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="prepareStatement-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.prepareStatement &#x3D; function(stmt)
{
    if(stmt.actor &#x3D;&#x3D;&#x3D; undefined){
        stmt.actor &#x3D; JSON.parse(this.lrs.actor);
    }
    else if(typeof stmt.actor &#x3D;&#x3D;&#x3D; &quot;string&quot;) {
        stmt.actor &#x3D; JSON.parse(stmt.actor);
    }
    if (this.lrs.grouping ||
        this.lrs.registration ||
        this.lrs.activity_platform) {
        if (!stmt.context) {
            stmt.context &#x3D; {};
        }
    }

    if (this.lrs.grouping) {
        if (!stmt.context.contextActivities) {
            stmt.context.contextActivities &#x3D; {};
        }
        
        // PR from brian-learningpool to resolve context overwriting
        if (!Array.isArray(stmt.context.contextActivities.grouping)) {
            stmt.context.contextActivities.grouping &#x3D; [{ id : this.lrs.grouping }];
        } else {
            stmt.context.contextActivities.grouping.splice(0, 0, { id : this.lrs.grouping });
        }
    }
    if (this.lrs.registration) {
        stmt.context.registration &#x3D; this.lrs.registration;
    }
    if (this.lrs.activity_platform) {
        stmt.context.platform &#x3D; this.lrs.activity_platform;
    }
};

// tests the configuration of the lrs object
XAPIWrapper.prototype.testConfig &#x3D; testConfig;

// writes to the console if available
XAPIWrapper.prototype.log &#x3D; log;

// Default encoding
XAPIWrapper.prototype.defaultEncoding &#x3D; &#x27;utf-8&#x27;;</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-sendStatement">


                                <h4><a href="#xapiwrapper-sendStatement">sendStatement</a> <small> (stmt, callback)</small></h4>

                                <div class="block">

                                    <p>Send a single statement to the LRS. Makes a Javascript object<br />
with the statement id as 'id' available to the callback function.</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>stmt</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>statement object to send</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    <p>function to be called after the LRS responds            to this request (makes the call asynchronous)<br />
the function will be passed the XMLHttpRequest object<br />
and an object with an id property assigned the id<br />
of the statement</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>object containing xhr object and id of statement</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#sendStatement-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="sendStatement-example-0">
                                            <pre><code class="language-javascript">// Send Statement
var stmt &#x3D; {&quot;actor&quot; : {&quot;mbox&quot; : &quot;mailto:tom@example.com&quot;},
            &quot;verb&quot; : {&quot;id&quot; : &quot;http://adlnet.gov/expapi/verbs/answered&quot;,
                      &quot;display&quot; : {&quot;en-US&quot; : &quot;answered&quot;}},
            &quot;object&quot; : {&quot;id&quot; : &quot;http://adlnet.gov/expapi/activities/question&quot;}};
var resp_obj &#x3D; ADL.XAPIWrapper.sendStatement(stmt);
ADL.XAPIWrapper.log(&quot;[&quot; + resp_obj.id + &quot;]: &quot; + resp_obj.xhr.status + &quot; - &quot; + resp_obj.xhr.statusText);
&gt;&gt; [3e616d1c-5394-42dc-a3aa-29414f8f0dfe]: 204 - NO CONTENT

// Send Statement with Callback
var stmt &#x3D; {&quot;actor&quot; : {&quot;mbox&quot; : &quot;mailto:tom@example.com&quot;},
            &quot;verb&quot; : {&quot;id&quot; : &quot;http://adlnet.gov/expapi/verbs/answered&quot;,
                      &quot;display&quot; : {&quot;en-US&quot; : &quot;answered&quot;}},
            &quot;object&quot; : {&quot;id&quot; : &quot;http://adlnet.gov/expapi/activities/question&quot;}};
ADL.XAPIWrapper.sendStatement(stmt, function(resp, obj){
    ADL.XAPIWrapper.log(&quot;[&quot; + obj.id + &quot;]: &quot; + resp.status + &quot; - &quot; + resp.statusText);});
&gt;&gt; [4edfe763-8b84-41f1-a355-78b7601a6fe8]: 204 - NO CONTENT</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.sendStatement &#x3D; function(stmt, callback, attachments)
{
    if (this.testConfig())
    {
        this.prepareStatement(stmt);
        var id;
        if (stmt[&#x27;id&#x27;])
        {
            id &#x3D; stmt[&#x27;id&#x27;];
        }
        else
        {
            id &#x3D; ADL.ruuid();
            stmt[&#x27;id&#x27;] &#x3D; id;
        }

        var payload &#x3D; JSON.stringify(stmt);
        var extraHeaders &#x3D; null;
        if(attachments &amp;&amp; attachments.length &gt; 0)
        {
            extraHeaders &#x3D; {}
            payload &#x3D; this.buildMultipartPost(stmt,attachments,extraHeaders);
        }
        var resp &#x3D; ADL.XHR_request(this.lrs, this.lrs.endpoint+&quot;statements&quot;,
            &quot;POST&quot;, payload, this.lrs.auth, callback, {&quot;id&quot;:id}, null, extraHeaders,
            this.withCredentials, this.strictCallbacks);
        if (!callback)
            return {&quot;xhr&quot;:resp,
                    &quot;id&quot; :id};
    }
};

XAPIWrapper.prototype.stringToArrayBuffer &#x3D; function(content, encoding)
{
    encoding &#x3D; encoding || ADL.XAPIWrapper.defaultEncoding;

    return new TextEncoder(encoding).encode(content).buffer;
};

XAPIWrapper.prototype.stringFromArrayBuffer &#x3D; function(content, encoding) {
    encoding &#x3D; encoding || ADL.XAPIWrapper.defaultEncoding;

    return new TextDecoder(encoding).decode(content);
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>


                            <section id="xapiwrapper-sendStatements">


                                <h4><a href="#xapiwrapper-sendStatements">sendStatements</a> <small> (stmtArray, callback)</small></h4>

                                <div class="block">

                                    <p>Send a list of statements to the LRS.</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>stmtArray</em></td>
                                                <td><span class="label label-primary">array</span></td>
                                                <td>
                                                    <p>the list of statement objects to send</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    <p>function to be called after the LRS responds            to this request (makes the call asynchronous)<br />
the function will be passed the XMLHttpRequest object</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>xhr response object</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#sendStatements-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="sendStatements-example-0">
                                            <pre><code class="language-javascript">var stmt &#x3D; {&quot;actor&quot; : {&quot;mbox&quot; : &quot;mailto:tom@example.com&quot;},
            &quot;verb&quot; : {&quot;id&quot; : &quot;http://adlnet.gov/expapi/verbs/answered&quot;,
                      &quot;display&quot; : {&quot;en-US&quot; : &quot;answered&quot;}},
            &quot;object&quot; : {&quot;id&quot; : &quot;http://adlnet.gov/expapi/activities/question&quot;}};
var resp_obj &#x3D; ADL.XAPIWrapper.sendStatement(stmt);
ADL.XAPIWrapper.getStatements({&quot;statementId&quot;:resp_obj.id});
&gt;&gt; {&quot;version&quot;: &quot;1.0.0&quot;,
    &quot;timestamp&quot;: &quot;2013-09-09 21:36:40.185841+00:00&quot;,
    &quot;object&quot;: {&quot;id&quot;: &quot;http://adlnet.gov/expapi/activities/question&quot;, &quot;objectType&quot;: &quot;Activity&quot;},
    &quot;actor&quot;: {&quot;mbox&quot;: &quot;mailto:tom@example.com&quot;, &quot;name&quot;: &quot;tom creighton&quot;, &quot;objectType&quot;: &quot;Agent&quot;},
    &quot;stored&quot;: &quot;2013-09-09 21:36:40.186124+00:00&quot;,
    &quot;verb&quot;: {&quot;id&quot;: &quot;http://adlnet.gov/expapi/verbs/answered&quot;, &quot;display&quot;: {&quot;en-US&quot;: &quot;answered&quot;}},
    &quot;authority&quot;: {&quot;mbox&quot;: &quot;mailto:tom@adlnet.gov&quot;, &quot;name&quot;: &quot;tom&quot;, &quot;objectType&quot;: &quot;Agent&quot;},
    &quot;context&quot;: {&quot;registration&quot;: &quot;51a6f860-1997-11e3-8ffd-0800200c9a66&quot;},
    &quot;id&quot;: &quot;ea9c1d01-0606-4ec7-8e5d-20f87b1211ed&quot;}</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.sendStatements &#x3D; function(stmtArray, callback)
{
    if (this.testConfig())
    {
        for(var i in stmtArray)
        {
            if (stmtArray.hasOwnProperty(i))
                this.prepareStatement(stmtArray[i]);
        }
        var resp &#x3D; ADL.XHR_request(this.lrs,this.lrs.endpoint+&quot;statements&quot;,
            &quot;POST&quot;, JSON.stringify(stmtArray), this.lrs.auth, callback, null,
            false, null, this.withCredentials, this.strictCallbacks);


        if (!callback)
        {
            return resp;
        }
    }
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-getStatements">


                                <h4><a href="#xapiwrapper-getStatements">getStatements</a> <small> (searchparams, more, callback)</small></h4>

                                <div class="block">

                                    <p>Get statement(s) based on the searchparams or more url.</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>searchparams</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>an ADL.XAPIWrapper.searchParams object of                key(search parameter)-value(parameter value) pairs.<br />
Example:<br />
var myparams = ADL.XAPIWrapper.searchParams();<br />
myparams['verb'] = ADL.verbs.completed.id;<br />
var completedStmts = ADL.XAPIWrapper.getStatements(myparams);</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>more</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the more url found in the StatementResults object, if there are more        statements available based on your get statements request. Pass the<br />
more url as this parameter to retrieve those statements.</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    <ul>
<li>function to be called after the LRS responds            to this request (makes the call asynchronous)<br />
the function will be passed the XMLHttpRequest object</li>
</ul>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>xhr response object or null if 404</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#getStatements-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="getStatements-example-0">
                                            <pre><code class="language-javascript">var ret &#x3D; ADL.XAPIWrapper.getStatements();
if (ret)
    ADL.XAPIWrapper.log(ret.statements);

&gt;&gt; &lt;Array of statements&gt;</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.getStatements &#x3D; function(searchparams, more, callback)
{
    if (this.testConfig())
    {
        var url &#x3D; this.lrs.endpoint + &quot;statements&quot;;
        if (more)
        {
            url &#x3D; this.base + more;
        }
        else
        {
            var urlparams &#x3D; new Array();

            for (s in searchparams)
            {
                if (searchparams.hasOwnProperty(s))
                {
                    if (s &#x3D;&#x3D; &quot;until&quot; || s &#x3D;&#x3D; &quot;since&quot;) {
                        var d &#x3D; new Date(searchparams[s]);
                        urlparams.push(s + &quot;&#x3D;&quot; + encodeURIComponent(d.toISOString()));
                    } else {
                        urlparams.push(s + &quot;&#x3D;&quot; + encodeURIComponent(searchparams[s]));
                    }
                }
            }
            if (urlparams.length &gt; 0)
                url &#x3D; url + &quot;?&quot; + urlparams.join(&quot;&amp;&quot;);
        }

        var res &#x3D; ADL.XHR_request(this.lrs,url, &quot;GET&quot;, null, this.lrs.auth,
            callback, null, false, null, this.withCredentials, this.strictCallbacks);

        if(res &#x3D;&#x3D;&#x3D; undefined || res.status &#x3D;&#x3D; 404)
        {
            return null
        }

        try
        {
            return JSON.parse(res.response);
        }
        catch(e)
        {
            return res.response;
        }
    }
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-getActivities">


                                <h4><a href="#xapiwrapper-getActivities">getActivities</a> <small> (activityid, callback)</small></h4>

                                <div class="block">

                                    <p>Gets the Activity object from the LRS.</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>activityid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id of the Activity to get</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    <p>function to be called after the LRS responds            to this request (makes the call asynchronous)<br />
the function will be passed the XMLHttpRequest object</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>xhr response object or null if 404</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#getActivities-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="getActivities-example-0">
                                            <pre><code class="language-javascript">var res &#x3D; ADL.XAPIWrapper.getActivities(&quot;http://adlnet.gov/expapi/activities/question&quot;);
ADL.XAPIWrapper.log(res);
&gt;&gt; &lt;Activity object&gt;</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.getActivities &#x3D; function(activityid, callback)
{
    if (this.testConfig())
    {
        var url &#x3D; this.lrs.endpoint + &quot;activities?activityId&#x3D;&lt;activityid&gt;&quot;;
        url &#x3D; url.replace(&#x27;&lt;activityid&gt;&#x27;, encodeURIComponent(activityid));

        var result &#x3D; ADL.XHR_request(this.lrs, url, &quot;GET&quot;, null, this.lrs.auth,
            callback, null, true, null, this.withCredentials, this.strictCallbacks);

        if(result &#x3D;&#x3D;&#x3D; undefined || result.status &#x3D;&#x3D; 404)
        {
            return null
        }

        try
        {
            return JSON.parse(result.response);
        }
        catch(e)
        {
            return result.response;
        }
    }
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-sendState">


                                <h4><a href="#xapiwrapper-sendState">sendState</a> <small> (activityid, agent, stateid, registration, stateval, matchHash, noneMatchHash, callback)</small></h4>

                                <div class="block">

                                    <p>Store activity state in the LRS</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>activityid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id of the Activity this state is about</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>agent</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>the agent this Activity state is related to</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>stateid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id you want associated with this state</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>registration</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the registraton id associated with this state</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>stateval</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the state</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>matchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the hash of the state to replace or * to replace any</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>noneMatchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the hash of the current state or * to indicate no previous state</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    <p>function to be called after the LRS responds            to this request (makes the call asynchronous)<br />
the function will be passed the XMLHttpRequest object</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">boolean</span>
                                        &nbsp;
                                        <p>false if no activity state is included</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#sendState-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="sendState-example-0">
                                            <pre><code class="language-javascript">var stateval &#x3D; {&quot;info&quot;:&quot;the state info&quot;};
ADL.XAPIWrapper.sendState(&quot;http://adlnet.gov/expapi/activities/question&quot;,
                   {&quot;mbox&quot;:&quot;mailto:tom@example.com&quot;},
                   &quot;questionstate&quot;, null, stateval);</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.sendState &#x3D; function(activityid, agent, stateid, registration, stateval, matchHash, noneMatchHash, callback)
{
    if (this.testConfig())
    {
        var url &#x3D; this.lrs.endpoint + &quot;activities/state?activityId&#x3D;&lt;activity ID&gt;&amp;agent&#x3D;&lt;agent&gt;&amp;stateId&#x3D;&lt;stateid&gt;&quot;;

        url &#x3D; url.replace(&#x27;&lt;activity ID&gt;&#x27;,encodeURIComponent(activityid));
        url &#x3D; url.replace(&#x27;&lt;agent&gt;&#x27;,encodeURIComponent(JSON.stringify(agent)));
        url &#x3D; url.replace(&#x27;&lt;stateid&gt;&#x27;,encodeURIComponent(stateid));

        if (registration)
        {
            url +&#x3D; &quot;&amp;registration&#x3D;&quot; + encodeURIComponent(registration);
        }

        var headers &#x3D; null;
        if(matchHash &amp;&amp; noneMatchHash)
        {
            log(&quot;Can&#x27;t have both If-Match and If-None-Match&quot;);
        }
        else if (matchHash)
        {
            headers &#x3D; {&quot;If-Match&quot;:ADL.formatHash(matchHash)};
        }
        else if (noneMatchHash)
        {
            headers &#x3D; {&quot;If-None-Match&quot;:ADL.formatHash(noneMatchHash)};
        }

        var method &#x3D; &quot;PUT&quot;;
        if (stateval)
        {
            if (stateval instanceof Array)
            {
                stateval &#x3D; JSON.stringify(stateval);
                headers &#x3D; headers || {};
                headers[&quot;Content-Type&quot;] &#x3D;&quot;application/json&quot;;
            }
            else if (stateval instanceof Object)
            {
                stateval &#x3D; JSON.stringify(stateval);
                headers &#x3D; headers || {};
                headers[&quot;Content-Type&quot;] &#x3D;&quot;application/json&quot;;
                method &#x3D; &quot;POST&quot;;
            }
            else
            {
                headers &#x3D; headers || {};
                headers[&quot;Content-Type&quot;] &#x3D;&quot;application/octet-stream&quot;;
            }
        }
        else
        {
            this.log(&quot;No activity state was included.&quot;);
            return false;
        }
        //(lrs, url, method, data, auth, callback, callbackargs, ignore404, extraHeaders)

        ADL.XHR_request(this.lrs, url, method, stateval, this.lrs.auth, callback,
            null, null, headers, this.withCredentials, this.strictCallbacks);
    }
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-getState">


                                <h4><a href="#xapiwrapper-getState">getState</a> <small> (activityid, agent, stateid, registration, since, callback)</small></h4>

                                <div class="block">

                                    <p>Get activity state from the LRS</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>activityid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id of the Activity this state is about</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>agent</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>the agent this Activity state is related to</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>stateid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id of the state, if not included, the response will be a list of stateids            associated with the activity and agent)</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>registration</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the registraton id associated with this state</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>since</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>date object or date string telling the LRS to return objects newer than the date supplied</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    <p>function to be called after the LRS responds            to this request (makes the call asynchronous)<br />
the function will be passed the XMLHttpRequest object</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>xhr response object or null if 404</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#getState-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="getState-example-0">
                                            <pre><code class="language-javascript">ADL.XAPIWrapper.getState(&quot;http://adlnet.gov/expapi/activities/question&quot;,
                 {&quot;mbox&quot;:&quot;mailto:tom@example.com&quot;}, &quot;questionstate&quot;);
&gt;&gt; {info: &quot;the state info&quot;}</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.getState &#x3D; function(activityid, agent, stateid, registration, since, callback)
{
    if (this.testConfig())
    {
        var url &#x3D; this.lrs.endpoint + &quot;activities/state?activityId&#x3D;&lt;activity ID&gt;&amp;agent&#x3D;&lt;agent&gt;&quot;;

        url &#x3D; url.replace(&#x27;&lt;activity ID&gt;&#x27;,encodeURIComponent(activityid));
        url &#x3D; url.replace(&#x27;&lt;agent&gt;&#x27;,encodeURIComponent(JSON.stringify(agent)));

        if (stateid)
        {
            url +&#x3D; &quot;&amp;stateId&#x3D;&quot; + encodeURIComponent(stateid);
        }

        if (registration)
        {
            url +&#x3D; &quot;&amp;registration&#x3D;&quot; + encodeURIComponent(registration);
        }

        if(since)
        {
            since &#x3D; isDate(since);
            if (since !&#x3D; null) {
                url +&#x3D; &#x27;&amp;since&#x3D;&#x27; + encodeURIComponent(since.toISOString());
            }
        }

        var result &#x3D; ADL.XHR_request(this.lrs, url, &quot;GET&quot;, null, this.lrs.auth,
            callback, null, true, null, this.withCredentials, this.strictCallbacks);

        if(result &#x3D;&#x3D;&#x3D; undefined || result.status &#x3D;&#x3D; 404)
        {
            return null
        }

        try
        {
            return JSON.parse(result.response);
        }
        catch(e)
        {
            return result.response;
        }
    }
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-deleteState">


                                <h4><a href="#xapiwrapper-deleteState">deleteState</a> <small> (activityid, agent, stateid, registration, matchHash, noneMatchHash, callback)</small></h4>

                                <div class="block">

                                    <p>Delete activity state in the LRS</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>activityid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id of the Activity this state is about</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>agent</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>the agent this Activity state is related to</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>stateid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id you want associated with this state</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>registration</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the registraton id associated with this state</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>matchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the hash of the state to replace or * to replace any</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>noneMatchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the hash of the current state or * to indicate no previous state</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>function to be called after the LRS responds            to this request (makes the call asynchronous)<br />
the function will be passed the XMLHttpRequest object</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>xhr response object or null if 404</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#deleteState-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="deleteState-example-0">
                                            <pre><code class="language-javascript">var stateval &#x3D; {&quot;info&quot;:&quot;the state info&quot;};
ADL.XAPIWrapper.sendState(&quot;http://adlnet.gov/expapi/activities/question&quot;,
                          {&quot;mbox&quot;:&quot;mailto:tom@example.com&quot;},
                          &quot;questionstate&quot;, null, stateval);
ADL.XAPIWrapper.getState(&quot;http://adlnet.gov/expapi/activities/question&quot;,
                        {&quot;mbox&quot;:&quot;mailto:tom@example.com&quot;}, &quot;questionstate&quot;);
&gt;&gt; {info: &quot;the state info&quot;}

ADL.XAPIWrapper.deleteState(&quot;http://adlnet.gov/expapi/activities/question&quot;,
                        {&quot;mbox&quot;:&quot;mailto:tom@example.com&quot;}, &quot;questionstate&quot;);
&gt;&gt; XMLHttpRequest {statusText: &quot;NO CONTENT&quot;, status: 204, response: &quot;&quot;, responseType: &quot;&quot;, responseXML: null}

ADL.XAPIWrapper.getState(&quot;http://adlnet.gov/expapi/activities/question&quot;,
                        {&quot;mbox&quot;:&quot;mailto:tom@example.com&quot;}, &quot;questionstate&quot;);
&gt;&gt; 404</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.deleteState &#x3D; function(activityid, agent, stateid, registration, matchHash, noneMatchHash, callback)
{
    if (this.testConfig())
    {
        var url &#x3D; this.lrs.endpoint + &quot;activities/state?activityId&#x3D;&lt;activity ID&gt;&amp;agent&#x3D;&lt;agent&gt;&amp;stateId&#x3D;&lt;stateid&gt;&quot;;

        url &#x3D; url.replace(&#x27;&lt;activity ID&gt;&#x27;,encodeURIComponent(activityid));
        url &#x3D; url.replace(&#x27;&lt;agent&gt;&#x27;,encodeURIComponent(JSON.stringify(agent)));
        url &#x3D; url.replace(&#x27;&lt;stateid&gt;&#x27;,encodeURIComponent(stateid));

        if (registration)
        {
            url +&#x3D; &quot;&amp;registration&#x3D;&quot; + encodeURIComponent(registration);
        }

        var headers &#x3D; null;
        if(matchHash &amp;&amp; noneMatchHash)
        {
            log(&quot;Can&#x27;t have both If-Match and If-None-Match&quot;);
        }
        else if (matchHash)
        {
            headers &#x3D; {&quot;If-Match&quot;:ADL.formatHash(matchHash)};
        }
        else if (noneMatchHash)
        {
            headers &#x3D; {&quot;If-None-Match&quot;:ADL.formatHash(noneMatchHash)};
        }

        var result &#x3D; ADL.XHR_request(this.lrs, url, &quot;DELETE&quot;, null, this.lrs.auth,
            callback, null, false, headers, this.withCredentials, this.strictCallbacks);

        if(result &#x3D;&#x3D;&#x3D; undefined || result.status &#x3D;&#x3D; 404)
        {
            return null
        }

        try
        {
            return JSON.parse(result.response);
        }
        catch(e)
        {
            return result;
        }
    }
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-sendActivityProfile">


                                <h4><a href="#xapiwrapper-sendActivityProfile">sendActivityProfile</a> <small> (activityid, profileid, profileval, matchHash, noneMatchHash, callback)</small></h4>

                                <div class="block">

                                    <p>Store activity profile in the LRS</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>activityid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id of the Activity this profile is about</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id you want associated with this profile</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileval</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the profile</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>matchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the hash of the profile to replace or * to replace any</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>noneMatchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the hash of the current profile or * to indicate no previous profile</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>function to be called after the LRS responds            to this request (makes the call asynchronous)<br />
the function will be passed the XMLHttpRequest object</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">bolean</span>
                                        &nbsp;
                                        <p>false if no activity profile is included</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#sendActivityProfile-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="sendActivityProfile-example-0">
                                            <pre><code class="language-javascript">var profile &#x3D; {&quot;info&quot;:&quot;the profile&quot;};
ADL.XAPIWrapper.sendActivityProfile(&quot;http://adlnet.gov/expapi/activities/question&quot;,
                                    &quot;actprofile&quot;, profile, null, &quot;*&quot;);</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.sendActivityProfile &#x3D; function(activityid, profileid, profileval, matchHash, noneMatchHash, callback)
{
    if (this.testConfig())
    {
        var url &#x3D; this.lrs.endpoint + &quot;activities/profile?activityId&#x3D;&lt;activity ID&gt;&amp;profileId&#x3D;&lt;profileid&gt;&quot;;

        url &#x3D; url.replace(&#x27;&lt;activity ID&gt;&#x27;,encodeURIComponent(activityid));
        url &#x3D; url.replace(&#x27;&lt;profileid&gt;&#x27;,encodeURIComponent(profileid));

        var headers &#x3D; null;
        if(matchHash &amp;&amp; noneMatchHash)
        {
            log(&quot;Can&#x27;t have both If-Match and If-None-Match&quot;);
        }
        else if (matchHash)
        {
            headers &#x3D; {&quot;If-Match&quot;:ADL.formatHash(matchHash)};
        }
        else if (noneMatchHash)
        {
            headers &#x3D; {&quot;If-None-Match&quot;:ADL.formatHash(noneMatchHash)};
        }

        var method &#x3D; &quot;PUT&quot;;
        if (profileval)
        {
            if (profileval instanceof Array)
            {
                profileval &#x3D; JSON.stringify(profileval);
                headers &#x3D; headers || {};
                headers[&quot;Content-Type&quot;] &#x3D;&quot;application/json&quot;;
            }
            else if (profileval instanceof Object)
            {
                profileval &#x3D; JSON.stringify(profileval);
                headers &#x3D; headers || {};
                headers[&quot;Content-Type&quot;] &#x3D;&quot;application/json&quot;;
                method &#x3D; &quot;POST&quot;;
            }
            else
            {
                headers &#x3D; headers || {};
                headers[&quot;Content-Type&quot;] &#x3D;&quot;application/octet-stream&quot;;
            }
        }
        else
        {
            this.log(&quot;No activity profile was included.&quot;);
            return false;
        }

        ADL.XHR_request(this.lrs, url, method, profileval, this.lrs.auth, callback,
            null, false, headers, this.withCredentials, this.strictCallbacks);
    }
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-getActivityProfile">


                                <h4><a href="#xapiwrapper-getActivityProfile">getActivityProfile</a> <small> (activityid, profileid, since, {function [callback]    function to be called after the LRS responds)</small></h4>

                                <div class="block">

                                    <p>Get activity profile from the LRS</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>activityid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id of the Activity this profile is about</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id of the profile, if not included, the response will be a list of profileids              associated with the activity</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>since</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>date object or date string telling the LRS to return objects newer than the date supplied</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>{function [callback]    function to be called after the LRS responds</em></td>
                                                <td></td>
                                                <td>
                                                    <pre><code>       to this request (makes the call asynchronous)
       the function will be passed the XMLHttpRequest object</code></pre>
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>xhr response object or null if 404</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#getActivityProfile-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="getActivityProfile-example-0">
                                            <pre><code class="language-javascript">ADL.XAPIWrapper.getActivityProfile(&quot;http://adlnet.gov/expapi/activities/question&quot;,
                                   &quot;actprofile&quot;, null,
                                   function(r){ADL.XAPIWrapper.log(JSON.parse(r.response));});
&gt;&gt; {info: &quot;the profile&quot;}</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.getActivityProfile &#x3D; function(activityid, profileid, since, callback)
{
    if (this.testConfig())
    {
        var url &#x3D; this.lrs.endpoint + &quot;activities/profile?activityId&#x3D;&lt;activity ID&gt;&quot;;

        url &#x3D; url.replace(&#x27;&lt;activity ID&gt;&#x27;,encodeURIComponent(activityid));

        if (profileid)
        {
            url +&#x3D; &quot;&amp;profileId&#x3D;&quot; + encodeURIComponent(profileid);
        }

        if(since)
        {
            since &#x3D; isDate(since);
            if (since !&#x3D; null) {
                url +&#x3D; &#x27;&amp;since&#x3D;&#x27; + encodeURIComponent(since.toISOString());
            }
        }

        var result &#x3D; ADL.XHR_request(this.lrs, url, &quot;GET&quot;, null, this.lrs.auth,
            callback, null, true, null, this.withCredentials, this.strictCallbacks);

        if(result &#x3D;&#x3D;&#x3D; undefined || result.status &#x3D;&#x3D; 404)
        {
            return null
        }

        try
        {
            return JSON.parse(result.response);
        }
        catch(e)
        {
            return result.response;
        }
    }
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-deleteActivityProfile">


                                <h4><a href="#xapiwrapper-deleteActivityProfile">deleteActivityProfile</a> <small> (activityid, profileid, matchHash, noneMatchHash, callback)</small></h4>

                                <div class="block">

                                    <p>Delete activity profile in the LRS</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>activityid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id of the Activity this profile is about</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id you want associated with this profile</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>matchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the hash of the profile to replace or * to replace any</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>noneMatchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the hash of the current profile or * to indicate no previous profile</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>function to be called after the LRS responds            to this request (makes the call asynchronous)<br />
the function will be passed the XMLHttpRequest object</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>xhr response object or null if 404</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#deleteActivityProfile-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="deleteActivityProfile-example-0">
                                            <pre><code class="language-javascript">ADL.XAPIWrapper.deleteActivityProfile(&quot;http://adlnet.gov/expapi/activities/question&quot;,
                                      &quot;actprofile&quot;);
&gt;&gt; XMLHttpRequest {statusText: &quot;NO CONTENT&quot;, status: 204, response: &quot;&quot;, responseType: &quot;&quot;, responseXML: null}</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.deleteActivityProfile &#x3D; function(activityid, profileid, matchHash, noneMatchHash, callback)
{
    if (this.testConfig())
    {
        var url &#x3D; this.lrs.endpoint + &quot;activities/profile?activityId&#x3D;&lt;activity ID&gt;&amp;profileId&#x3D;&lt;profileid&gt;&quot;;

        url &#x3D; url.replace(&#x27;&lt;activity ID&gt;&#x27;,encodeURIComponent(activityid));
        url &#x3D; url.replace(&#x27;&lt;profileid&gt;&#x27;,encodeURIComponent(profileid));

        var headers &#x3D; null;
        if(matchHash &amp;&amp; noneMatchHash)
        {
            log(&quot;Can&#x27;t have both If-Match and If-None-Match&quot;);
        }
        else if (matchHash)
        {
            headers &#x3D; {&quot;If-Match&quot;:ADL.formatHash(matchHash)};
        }
        else if (noneMatchHash)
        {
            headers &#x3D; {&quot;If-None-Match&quot;:ADL.formatHash(noneMatchHash)};
        }

        var result &#x3D; ADL.XHR_request(this.lrs, url, &quot;DELETE&quot;, null, this.lrs.auth,
            callback, null, false, headers,this.withCredentials, this.strictCallbacks);

        if(result &#x3D;&#x3D;&#x3D; undefined || result.status &#x3D;&#x3D; 404)
        {
            return null
        }

        try
        {
            return JSON.parse(result.response);
        }
        catch(e)
        {
            return result;
        }
    }
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-getAgents">


                                <h4><a href="#xapiwrapper-getAgents">getAgents</a> <small> (agent, {function [callback]    function to be called after the LRS responds)</small></h4>

                                <div class="block">

                                    <p>Gets the Person object from the LRS based on an agent object.<br />
The Person object may contain more information about an agent.<br />
See the xAPI Spec for details.</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>agent</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>the agent object to get a Person</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>{function [callback]    function to be called after the LRS responds</em></td>
                                                <td></td>
                                                <td>
                                                    <pre><code>       to this request (makes the call asynchronous)
       the function will be passed the XMLHttpRequest object</code></pre>
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>xhr response object or null if 404</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#getAgents-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="getAgents-example-0">
                                            <pre><code class="language-javascript">var res &#x3D; ADL.XAPIWrapper.getAgents({&quot;mbox&quot;:&quot;mailto:tom@example.com&quot;});
ADL.XAPIWrapper.log(res);
&gt;&gt; &lt;Person object&gt;</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.getAgents &#x3D; function(agent, callback)
{
    if (this.testConfig())
    {
        var url &#x3D; this.lrs.endpoint + &quot;agents?agent&#x3D;&lt;agent&gt;&quot;;
        url &#x3D; url.replace(&#x27;&lt;agent&gt;&#x27;, encodeURIComponent(JSON.stringify(agent)));

        var result &#x3D; ADL.XHR_request(this.lrs, url, &quot;GET&quot;, null, this.lrs.auth,
            callback, null, true, null, this.withCredentials, this.strictCallbacks);

        if(result &#x3D;&#x3D;&#x3D; undefined || result.status &#x3D;&#x3D; 404)
        {
            return null
        }

        try
        {
            return JSON.parse(result.response);
        }
        catch(e)
        {
            return result.response;
        }
    }
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-sendAgentProfile">


                                <h4><a href="#xapiwrapper-sendAgentProfile">sendAgentProfile</a> <small> (agent, profileid, profileval, matchHash, noneMatchHash, callback)</small></h4>

                                <div class="block">

                                    <p>Store agent profile in the LRS</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>agent</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>the agent this profile is related to</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id you want associated with this profile</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileval</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the profile</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>matchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the hash of the profile to replace or * to replace any</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>noneMatchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the hash of the current profile or * to indicate no previous profile</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>function to be called after the LRS responds            to this request (makes the call asynchronous)<br />
the function will be passed the XMLHttpRequest object</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>false if no agent profile is included</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#sendAgentProfile-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="sendAgentProfile-example-0">
                                            <pre><code class="language-javascript">var profile &#x3D; {&quot;info&quot;:&quot;the agent profile&quot;};
ADL.XAPIWrapper.sendAgentProfile({&quot;mbox&quot;:&quot;mailto:tom@example.com&quot;},
                                  &quot;agentprofile&quot;, profile, null, &quot;*&quot;);</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.sendAgentProfile &#x3D; function(agent, profileid, profileval, matchHash, noneMatchHash, callback)
{
    if (this.testConfig())
    {
        var url &#x3D; this.lrs.endpoint + &quot;agents/profile?agent&#x3D;&lt;agent&gt;&amp;profileId&#x3D;&lt;profileid&gt;&quot;;

        url &#x3D; url.replace(&#x27;&lt;agent&gt;&#x27;,encodeURIComponent(JSON.stringify(agent)));
        url &#x3D; url.replace(&#x27;&lt;profileid&gt;&#x27;,encodeURIComponent(profileid));

        var headers &#x3D; null;
        if(matchHash &amp;&amp; noneMatchHash)
        {
            log(&quot;Can&#x27;t have both If-Match and If-None-Match&quot;);
        }
        else if (matchHash)
        {
            headers &#x3D; {&quot;If-Match&quot;:ADL.formatHash(matchHash)};
        }
        else if (noneMatchHash)
        {
            headers &#x3D; {&quot;If-None-Match&quot;:ADL.formatHash(noneMatchHash)};
        }

        var method &#x3D; &quot;PUT&quot;;
        if (profileval)
        {
            if (profileval instanceof Array)
            {
                profileval &#x3D; JSON.stringify(profileval);
                headers &#x3D; headers || {};
                headers[&quot;Content-Type&quot;] &#x3D;&quot;application/json&quot;;
            }
            else if (profileval instanceof Object)
            {
                profileval &#x3D; JSON.stringify(profileval);
                headers &#x3D; headers || {};
                headers[&quot;Content-Type&quot;] &#x3D;&quot;application/json&quot;;
                method &#x3D; &quot;POST&quot;;
            }
            else
            {
                headers &#x3D; headers || {};
                headers[&quot;Content-Type&quot;] &#x3D;&quot;application/octet-stream&quot;;
            }
        }
        else
        {
            this.log(&quot;No agent profile was included.&quot;);
            return false;
        }

        ADL.XHR_request(this.lrs, url, method, profileval, this.lrs.auth, callback,
            null, false, headers, this.withCredentials, this.strictCallbacks);
    }
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-getAgentProfile">


                                <h4><a href="#xapiwrapper-getAgentProfile">getAgentProfile</a> <small> (agent, profileid, since, callback)</small></h4>

                                <div class="block">

                                    <p>Get agnet profile from the LRS</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>agent</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>the agent associated with this profile</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id of the profile, if not included, the response will be a list of profileids              associated with the agent</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>since</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>date object or date string telling the LRS to return objects newer than the date supplied</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    <p>function to be called after the LRS responds            to this request (makes the call asynchronous)<br />
the function will be passed the XMLHttpRequest object</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>xhr response object or null if 404</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#getAgentProfile-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="getAgentProfile-example-0">
                                            <pre><code class="language-javascript">ADL.XAPIWrapper.getAgentProfile({&quot;mbox&quot;:&quot;mailto:tom@example.com&quot;},
                                 &quot;agentprofile&quot;, null,
                                 function(r){ADL.XAPIWrapper.log(JSON.parse(r.response));});
&gt;&gt; {info: &quot;the agent profile&quot;}</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.getAgentProfile &#x3D; function(agent, profileid, since, callback)
{
    if (this.testConfig()){
        var url &#x3D; this.lrs.endpoint + &quot;agents/profile?agent&#x3D;&lt;agent&gt;&quot;;

        url &#x3D; url.replace(&#x27;&lt;agent&gt;&#x27;,encodeURIComponent(JSON.stringify(agent)));
        url &#x3D; url.replace(&#x27;&lt;profileid&gt;&#x27;,encodeURIComponent(profileid));

        if (profileid)
        {
            url +&#x3D; &quot;&amp;profileId&#x3D;&quot; + encodeURIComponent(profileid);
        }

        if(since)
        {
            since &#x3D; isDate(since);
            if (since !&#x3D; null) {
                url +&#x3D; &#x27;&amp;since&#x3D;&#x27; + encodeURIComponent(since.toISOString());
            }
        }

        var result &#x3D; ADL.XHR_request(this.lrs, url, &quot;GET&quot;, null, this.lrs.auth,
            callback, null, true, null, this.withCredentials, this.strictCallbacks);

        if(result &#x3D;&#x3D;&#x3D; undefined || result.status &#x3D;&#x3D; 404)
        {
            return null
        }

        try
        {
            return JSON.parse(result.response);
        }
        catch(e)
        {
            return result.response;
        }
    }
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-deleteAgentProfile">


                                <h4><a href="#xapiwrapper-deleteAgentProfile">deleteAgentProfile</a> <small> (agent, profileid, matchHash, noneMatchHash, callback)</small></h4>

                                <div class="block">

                                    <p>Delete agent profile in the LRS</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>agent</em></td>
                                                <td><span class="label label-primary">oject</span></td>
                                                <td>
                                                    <p>the id of the Agent this profile is about</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the id you want associated with this profile</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>matchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the hash of the profile to replace or * to replace any</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>noneMatchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the hash of the current profile or * to indicate no previous profile</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>function to be called after the LRS responds            to this request (makes the call asynchronous)<br />
the function will be passed the XMLHttpRequest object</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>xhr response object or null if 404</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#deleteAgentProfile-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="deleteAgentProfile-example-0">
                                            <pre><code class="language-javascript">ADL.XAPIWrapper.deleteAgentProfile({&quot;mbox&quot;:&quot;mailto:tom@example.com&quot;},
                                    &quot;agentprofile&quot;);
&gt;&gt; XMLHttpRequest {statusText: &quot;NO CONTENT&quot;, status: 204, response: &quot;&quot;, responseType: &quot;&quot;, responseXML: null}</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.deleteAgentProfile &#x3D; function(agent, profileid, matchHash, noneMatchHash, callback)
{
    if (this.testConfig())
    {
        var url &#x3D; this.lrs.endpoint + &quot;agents/profile?agent&#x3D;&lt;agent&gt;&amp;profileId&#x3D;&lt;profileid&gt;&quot;;

        url &#x3D; url.replace(&#x27;&lt;agent&gt;&#x27;,encodeURIComponent(JSON.stringify(agent)));
        url &#x3D; url.replace(&#x27;&lt;profileid&gt;&#x27;,encodeURIComponent(profileid));

        var headers &#x3D; null;
        if(matchHash &amp;&amp; noneMatchHash)
        {
            log(&quot;Can&#x27;t have both If-Match and If-None-Match&quot;);
        }
        else if (matchHash)
        {
            headers &#x3D; {&quot;If-Match&quot;:ADL.formatHash(matchHash)};
        }
        else if (noneMatchHash)
        {
            headers &#x3D; {&quot;If-None-Match&quot;:ADL.formatHash(noneMatchHash)};
        }

        var result &#x3D; ADL.XHR_request(this.lrs, url, &quot;DELETE&quot;, null, this.lrs.auth,
            callback, null, false, headers, this.withCredentials, this.strictCallbacks);

        if(result &#x3D;&#x3D;&#x3D; undefined || result.status &#x3D;&#x3D; 404)
        {
            return null
        }

        try
        {
            return JSON.parse(result.response);
        }
        catch(e)
        {
            return result;
        }
    }
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>


                            <section id="xapiwrapper-ie_request">


                                <h4><a href="#xapiwrapper-ie_request">ie_request</a> <small> (method, url, headers, data)</small></h4>

                                <div class="block">

                                    <p>formats a request in a way that IE will allow</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>method</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the http request method (ex: &quot;PUT&quot;, &quot;GET&quot;)</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>url</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the url to the request (ex: ADL.XAPIWrapper.lrs.endpoint + &quot;statements&quot;)</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>headers</em></td>
                                                <td><span class="label label-primary">array</span></td>
                                                <td>
                                                    <p>headers to include in the request</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>data</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the body of the request, if there is one</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>xhr response object</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#ie_request-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="ie_request-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">function ie_request(method, url, headers, data)
{
    var newUrl &#x3D; url;

    //Everything that was on query string goes into form vars
    var formData &#x3D; new Array();
    var qsIndex &#x3D; newUrl.indexOf(&#x27;?&#x27;);
    if(qsIndex &gt; 0){
        formData.push(newUrl.substr(qsIndex+1));
        newUrl &#x3D; newUrl.substr(0, qsIndex);
    }

    //Method has to go on querystring, and nothing else
    newUrl &#x3D; newUrl + &#x27;?method&#x3D;&#x27; + method;

    //Headers
    if(headers !&#x3D;&#x3D; null){
        for (var headerName in headers) {
            if (headers.hasOwnProperty(headerName))
                formData.push(headerName + &quot;&#x3D;&quot; + encodeURIComponent(headers[headerName]));
        }
    }

    //The original data is repackaged as &quot;content&quot; form var
    if(data !&#x3D;&#x3D; null){
        formData.push(&#x27;content&#x3D;&#x27; + encodeURIComponent(data));
    }

    return {
        &quot;method&quot;:&quot;POST&quot;,
        &quot;url&quot;:newUrl,
        &quot;headers&quot;:{},
        &quot;data&quot;:formData.join(&quot;&amp;&quot;)
    };
}</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>



                            <section id="xapiwrapper-XHR_request">


                                <h4><a href="#xapiwrapper-XHR_request">XHR_request</a> <small> (lrs, url, method, data, auth, callback, callbackargs, ignore404, extraHeaders, withCredentials, strictCallbacks)</small></h4>

                                <div class="block">

                                    <p>makes a request to a server (if possible, use functions provided in XAPIWrapper)</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>lrs</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the lrs connection info, such as endpoint, auth, etc</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>url</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the url of this request</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>method</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the http request method</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>data</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the payload</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>auth</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>the value for the Authorization header</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    <p>function to be called after the LRS responds            to this request (makes the call asynchronous)</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callbackargs</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>additional javascript object to be passed to the callback function</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>ignore404</em></td>
                                                <td><span class="label label-primary">boolean</span></td>
                                                <td>
                                                    <p>allow page not found errors to pass</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>extraHeaders</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>other header key-values to be added to this request</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>withCredentials</em></td>
                                                <td><span class="label label-primary">boolean</span></td>
                                                <td>
                                                    
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>strictCallbacks</em></td>
                                                <td><span class="label label-primary">boolean</span></td>
                                                <td>
                                                    <p>Callback must be executed and first param is error or null if no error</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <p><strong>Returns</strong><br>
                                        <span class="label label-primary">object</span>
                                        &nbsp;
                                        <p>xhr response object</p>
                                        
                                        <!--
                                        &nbsp;

                                        -->
                                    </p>

                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#XHR_request-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="XHR_request-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">ADL.XHR_request &#x3D; function(lrs, url, method, data, auth, callback, callbackargs, ignore404, extraHeaders, withCredentials, strictCallbacks)
{
    &quot;use strict&quot;;

    var xhr,
        finished &#x3D; false,
        xDomainRequest &#x3D; false,
        ieXDomain &#x3D; false,
        ieModeRequest,
        urlparts &#x3D; url.toLowerCase().match(/^(.+):\/\/([^:\/]*):?(\d+)?(\/.*)?$/),
        location &#x3D; window.location,
        urlPort,
        result,
        extended,
        prop,
        until;

    //Consolidate headers
    var headers &#x3D; {};
    headers[&quot;Content-Type&quot;] &#x3D; &quot;application/json&quot;;
    headers[&quot;Authorization&quot;] &#x3D; auth;
    headers[&#x27;X-Experience-API-Version&#x27;] &#x3D; ADL.XAPIWrapper.xapiVersion;
    if(extraHeaders !&#x3D;&#x3D; null){
        for (var headerName in extraHeaders) {
            if (extraHeaders.hasOwnProperty(headerName))
                headers[headerName] &#x3D; extraHeaders[headerName];
        }
    }

    //See if this really is a cross domain
    xDomainRequest &#x3D; (location.protocol.toLowerCase() !&#x3D;&#x3D; urlparts[1] || location.hostname.toLowerCase() !&#x3D;&#x3D; urlparts[2]);
    if (!xDomainRequest) {
        urlPort &#x3D; (urlparts[3] &#x3D;&#x3D;&#x3D; null ? ( urlparts[1] &#x3D;&#x3D;&#x3D; &#x27;http&#x27; ? &#x27;80&#x27; : &#x27;443&#x27;) : urlparts[3]);
        xDomainRequest &#x3D; (urlPort &#x3D;&#x3D;&#x3D; location.port);
    }

    //Add extended LMS-specified values to the URL
    if (lrs !&#x3D;&#x3D; null &amp;&amp; lrs.extended !&#x3D;&#x3D; undefined) {
        extended &#x3D; new Array();
        for (prop in lrs.extended) {
            extended.push(prop + &quot;&#x3D;&quot; + encodeURIComponent(lrs.extended[prop]));
        }
        if (extended.length &gt; 0) {
            url +&#x3D; (url.indexOf(&quot;?&quot;) &gt; -1 ? &quot;&amp;&quot; : &quot;?&quot;) + extended.join(&quot;&amp;&quot;);
        }
    }

    //If it&#x27;s not cross domain or we&#x27;re not using IE, use the usual XmlHttpRequest
    var windowsVersionCheck &#x3D; window.XDomainRequest &amp;&amp; (window.XMLHttpRequest &amp;&amp; new XMLHttpRequest().responseType &#x3D;&#x3D;&#x3D; undefined);
    if (!xDomainRequest || windowsVersionCheck &#x3D;&#x3D;&#x3D; undefined || windowsVersionCheck&#x3D;&#x3D;&#x3D;false) {
        xhr &#x3D; new XMLHttpRequest();
        xhr.withCredentials &#x3D; withCredentials; //allow cross domain cookie based auth
        xhr.open(method, url, callback !&#x3D; null);
        for(var headerName in headers){
            xhr.setRequestHeader(headerName, headers[headerName]);
        }
    }
    //Otherwise, use IE&#x27;s XDomainRequest object
    else {
        ieXDomain &#x3D; true;
        ieModeRequest &#x3D; ie_request(method, url, headers, data);
        xhr &#x3D; new XDomainRequest();
        xhr.open(ieModeRequest.method, ieModeRequest.url);
    }

    //Setup request callback
    function requestComplete() {
        if(!finished){
            // may be in sync or async mode, using XMLHttpRequest or IE XDomainRequest, onreadystatechange or
            // onload or both might fire depending upon browser, just covering all bases with event hooks and
            // using &#x27;finished&#x27; flag to avoid triggering events multiple times
            finished &#x3D; true;
            var notFoundOk &#x3D; (ignore404 &amp;&amp; xhr.status &#x3D;&#x3D;&#x3D; 404);
            if (xhr.status &#x3D;&#x3D;&#x3D; undefined || (xhr.status &gt;&#x3D; 200 &amp;&amp; xhr.status &lt; 400) || notFoundOk) {
                if (callback) {
                    if(callbackargs){
                        strictCallbacks ? callback(null, xhr, callbackargs) : callback(xhr, callbackargs);
                    }
                    else {
                      var body;

                        try {
                            body &#x3D; JSON.parse(xhr.responseText);
                        }
                        catch(e){
                            body &#x3D; xhr.responseText;
                        }

                      strictCallbacks ? callback(null, xhr, body) : callback(xhr,body);
                    }
                } else {
                    result &#x3D; xhr;
                    return xhr;
                }
            } else {
                var warning;
                try {
                    warning &#x3D; &quot;There was a problem communicating with the Learning Record Store. ( &quot;
                        + xhr.status + &quot; | &quot; + xhr.response+ &quot; )&quot; + url
                } catch (ex) {
                    warning &#x3D; ex.toString();
                }
                ADL.XAPIWrapper.log(warning);
                ADL.xhrRequestOnError(xhr, method, url, callback, callbackargs, strictCallbacks);
                result &#x3D; xhr;
                return xhr;
            }
        } else {
            return result;
        }
    };

    xhr.onreadystatechange &#x3D; function () {
        if (xhr.readyState &#x3D;&#x3D;&#x3D; 4) {
           return requestComplete();
        }
    };

    xhr.onload &#x3D; requestComplete;
    xhr.onerror &#x3D; requestComplete;
    //xhr.onerror &#x3D;  ADL.xhrRequestOnError(xhr, method, url);

    xhr.send(ieXDomain ? ieModeRequest.data : data);

    if (!callback) {
        // synchronous
        if (ieXDomain) {
            // synchronous call in IE, with no asynchronous mode available.
            until &#x3D; 1000 + new Date();
            while (new Date() &lt; until &amp;&amp; xhr.readyState !&#x3D;&#x3D; 4 &amp;&amp; !finished) {
                delay();
            }
        }
        return requestComplete();
    }
};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-xhrRequestOnError">


                                <h4><a href="#xapiwrapper-xhrRequestOnError">xhrRequestOnError</a> <small> (xhr, method, url, callback, callbackargs, strictCallbacks)</small></h4>

                                <div class="block">

                                    <p>Holder for custom global error callback</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>xhr</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>xhr object or null</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>method</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>XMLHttpRequest request method</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>url</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    <p>full endpoint url</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    <p>function to be called after the LRS responds            to this request (makes the call asynchronous)</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callbackargs</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    <p>additional javascript object to be passed to the callback function</p>
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>strictCallbacks</em></td>
                                                <td><span class="label label-primary">boolean</span></td>
                                                <td>
                                                    <p>Callback must be executed and first param is error or null if no error</p>
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#xhrRequestOnError-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="xhrRequestOnError-example-0">
                                            <pre><code class="language-javascript">ADL.xhrRequestOnError &#x3D; function(xhr, method, url, callback, callbackargs) {
  console.log(xhr);
  alert(xhr.status + &quot; &quot; + xhr.statusText + &quot;: &quot; + xhr.response);
};</code></pre>
                                        </div>
                                        <div class="tab-pane" id="-source">
                                            <pre><code class="language-javascript">ADL.xhrRequestOnError &#x3D; function(xhr, method, url, callback, callbackargs, strictCallbacks){
    if (callback &amp;&amp; strictCallbacks) {
        var status &#x3D; xhr ? xhr.status : undefined;
        var error;
        if (status) {
            error &#x3D; new Error(&#x27;Request error: &#x27; + xhr.status);
        } else if (status &#x3D;&#x3D;&#x3D; 0 || status &#x3D;&#x3D;&#x3D; null) { // 0 and null &#x3D; aborted
            error &#x3D; new Error(&#x27;Request error: aborted&#x27;);
        } else {
            error &#x3D; new Error(&#x27;Reqeust error: unknown&#x27;);
        }

        if (callbackargs) {
            callback(error, xhr, callbackargs);
        } else {
          var body;

            try {
                body &#x3D; JSON.parse(xhr.responseText);
            } catch(e){
                body &#x3D; xhr.responseText;
            }

          callback(error, xhr, body);
        }
    }
};

ADL.formatHash &#x3D; function(hash)
{
  return (hash&#x3D;&#x3D;&#x3D;&quot;*&quot;) ? hash : &#x27;&quot;&#x27;+hash+&#x27;&quot;&#x27;;
}

ADL.XAPIWrapper &#x3D; new XAPIWrapper(Config, false);

}(window.ADL &#x3D; window.ADL || {}));</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>
                    </section>
            </div>
        </div>
        <script>
            $('.content').on('click', '.nav-tabs a', function(event) {

                event.preventDefault();

                var tabContainer = $(event.target).closest('.nav-tabs'),
                        tabs = tabContainer.find('li'),
                        tabsContent = tabContainer.parent().find('.tab-pane'),
                        index = tabContainer.find('a').indexOf(event.target);

                tabs.removeClass('active').eq(index).addClass('active');
                tabsContent.removeClass('active').eq(index).addClass('active');

            });
        </script>
        <script src="static/prism.js"></script>
    </body>
</html>
