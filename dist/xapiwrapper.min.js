/*! xAPIWrapper v 1.11.0 | Built on 2019-03-12 13:04:55+0000 */

var CryptoJS=(CryptoJS=CryptoJS||function(l,t){var e={},i=e.lib={},n=i.Base=function(){function i(){}return{extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=i.WordArray=n.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||s).stringify(this)},concat:function(t){var e=this.words,i=t.words,n=this.sigBytes,r=t.sigBytes;if(this.clamp(),n%4)for(var s=0;s<r;s++){var a=i[s>>>2]>>>24-s%4*8&255;e[n+s>>>2]|=a<<24-(n+s)%4*8}else if(65535<i.length)for(s=0;s<r;s+=4)e[n+s>>>2]=i[s>>>2];else e.push.apply(e,i);return this.sigBytes+=r,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=l.ceil(e/4)},clone:function(){var t=n.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],i=0;i<t;i+=4)e.push(4294967296*l.random()|0);return new d.init(e,t)}}),r=e.enc={},s=r.Hex={stringify:function(t){for(var e=t.words,i=t.sigBytes,n=[],r=0;r<i;r++){var s=e[r>>>2]>>>24-r%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new d.init(i,e/2)}},a=r.Latin1={stringify:function(t){for(var e=t.words,i=t.sigBytes,n=[],r=0;r<i;r++){var s=e[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n++)i[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new d.init(i,e)}},o=r.Utf8={stringify:function(t){try{return decodeURIComponent(escape(a.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return a.parse(unescape(encodeURIComponent(t)))}},p=(r.Base64={stringify:function(t){var e=t.words,i=t.sigBytes,n=this._map;t.clamp();for(var r=[],s=0;s<i;s+=3)for(var a=(e[s>>>2]>>>24-s%4*8&255)<<16|(e[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|e[s+2>>>2]>>>24-(s+2)%4*8&255,o=0;o<4&&s+.75*o<i;o++)r.push(n.charAt(a>>>6*(3-o)&63));var p=n.charAt(64);if(p)for(;r.length%4;)r.push(p);return r.join("")},parse:function(t){var e=t.length,i=this._map,n=i.charAt(64);if(n){var r=t.indexOf(n);-1!=r&&(e=r)}for(var s=[],a=0,o=0;o<e;o++)if(o%4){var p=i.indexOf(t.charAt(o-1))<<o%4*2,c=i.indexOf(t.charAt(o))>>>6-o%4*2;s[a>>>2]|=(p|c)<<24-a%4*8,a++}return d.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},i.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=o.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,i=e.words,n=e.sigBytes,r=this.blockSize,s=n/(4*r),a=(s=t?l.ceil(s):l.max((0|s)-this._minBufferSize,0))*r,o=l.min(4*a,n);if(a){for(var p=0;p<a;p+=r)this._doProcessBlock(i,p);var c=i.splice(0,a);e.sigBytes-=o}return new d.init(c,o)},clone:function(){var t=n.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0})),c=i.Hasher=p.extend({cfg:n.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(t,e){return new i.init(e).finalize(t)}},_createHmacHelper:function(i){return function(t,e){return new u.HMAC.init(i,e).finalize(t)}}}),u=e.algo={},h=[],f=u.SHA1=c.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var i=this._hash.words,n=i[0],r=i[1],s=i[2],a=i[3],o=i[4],p=0;p<80;p++){if(p<16)h[p]=0|t[e+p];else{var c=h[p-3]^h[p-8]^h[p-14]^h[p-16];h[p]=c<<1|c>>>31}var l=(n<<5|n>>>27)+o+h[p];l+=p<20?1518500249+(r&s|~r&a):p<40?1859775393+(r^s^a):p<60?(r&s|r&a|s&a)-1894007588:(r^s^a)-899497514,o=a,a=s,s=r<<30|r>>>2,r=n,n=l}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+s|0,i[3]=i[3]+a|0,i[4]=i[4]+o|0},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=l.floor(i/4294967296),e[15+(n+64>>>9<<4)]=i,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}});return e.SHA1=c._createHelper(f),e.HmacSHA1=c._createHmacHelper(f),e}(Math))||function(o,t){var e={},i=e.lib={},n=function(){},r=i.Base={extend:function(t){n.prototype=this;var e=new n;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},p=i.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,i=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var r=0;r<t;r++)e[n+r>>>2]|=(i[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<i.length)for(r=0;r<t;r+=4)e[n+r>>>2]=i[r>>>2];else e.push.apply(e,i);return this.sigBytes+=t,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=o.ceil(e/4)},clone:function(){var t=r.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],i=0;i<t;i+=4)e.push(4294967296*o.random()|0);return new p.init(e,t)}}),s=e.enc={},a=s.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var i=[],n=0;n<t;n++){var r=e[n>>>2]>>>24-n%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new p.init(i,e/2)}},c=s.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var i=[],n=0;n<t;n++)i.push(String.fromCharCode(e[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n++)i[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new p.init(i,e)}},l=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},d=i.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,i=e.words,n=e.sigBytes,r=this.blockSize,s=n/(4*r);if(t=(s=t?o.ceil(s):o.max((0|s)-this._minBufferSize,0))*r,n=o.min(4*t,n),t){for(var a=0;a<t;a+=r)this._doProcessBlock(i,a);a=i.splice(0,t),e.sigBytes-=n}return new p.init(a,n)},clone:function(){var t=r.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});i.Hasher=d.extend({cfg:r.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(t,e){return new i.init(e).finalize(t)}},_createHmacHelper:function(i){return function(t,e){return new u.HMAC.init(i,e).finalize(t)}}});var u=e.algo={};return e}(Math);!function(r){for(var t=CryptoJS,e=(n=t.lib).WordArray,i=n.Hasher,n=t.algo,s=[],f=[],a=function(t){return 4294967296*(t-(0|t))|0},o=2,p=0;p<64;){var c;t:{c=o;for(var l=r.sqrt(c),d=2;d<=l;d++)if(!(c%d)){c=!1;break t}c=!0}c&&(p<8&&(s[p]=a(r.pow(o,.5))),f[p]=a(r.pow(o,1/3)),p++),o++}var g=[];n=n.SHA256=i.extend({_doReset:function(){this._hash=new e.init(s.slice(0))},_doProcessBlock:function(t,e){for(var i=this._hash.words,n=i[0],r=i[1],s=i[2],a=i[3],o=i[4],p=i[5],c=i[6],l=i[7],d=0;d<64;d++){if(d<16)g[d]=0|t[e+d];else{var u=g[d-15],h=g[d-2];g[d]=((u<<25|u>>>7)^(u<<14|u>>>18)^u>>>3)+g[d-7]+((h<<15|h>>>17)^(h<<13|h>>>19)^h>>>10)+g[d-16]}u=l+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&p^~o&c)+f[d]+g[d],h=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&r^n&s^r&s),l=c,c=p,p=o,o=a+u|0,a=s,s=r,r=n,n=u+h|0}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+s|0,i[3]=i[3]+a|0,i[4]=i[4]+o|0,i[5]=i[5]+p|0,i[6]=i[6]+c|0,i[7]=i[7]+l|0},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=r.floor(i/4294967296),e[15+(n+64>>>9<<4)]=i,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA256=i._createHelper(n),t.HmacSHA256=i._createHmacHelper(n)}(Math),function(){var t=CryptoJS,c=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=c.parse(e));var i=t.blockSize,n=4*i;e.sigBytes>n&&(e=t.finalize(e)),e.clamp();for(var r=this._oKey=e.clone(),s=this._iKey=e.clone(),a=r.words,o=s.words,p=0;p<i;p++)a[p]^=1549556828,o[p]^=909522486;r.sigBytes=s.sigBytes=n,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),(window.ADL=window.ADL||{}).activityTypes={assessment:"http://adlnet.gov/expapi/activities/assessment",attempt:"http://adlnet.gov/expapi/activities/attempt",course:"http://adlnet.gov/expapi/activities/course",file:"http://adlnet.gov/expapi/activities/file",interaction:"http://adlnet.gov/expapi/activities/interaction",lesson:"http://adlnet.gov/expapi/activities/lesson",link:"http://adlnet.gov/expapi/activities/link",media:"http://adlnet.gov/expapi/activities/media",meeting:"http://adlnet.gov/expapi/activities/meeting",module:"http://adlnet.gov/expapi/activities/module",objective:"http://adlnet.gov/expapi/activities/objective",performance:"http://adlnet.gov/expapi/activities/performance",profile:"http://adlnet.gov/expapi/activities/profile",question:"http://adlnet.gov/expapi/activities/question",simulation:"http://adlnet.gov/expapi/activities/simulation"},(window.ADL=window.ADL||{}).verbs={abandoned:{id:"https://w3id.org/xapi/adl/verbs/abandoned",display:{"en-US":"abandoned"}},answered:{id:"http://adlnet.gov/expapi/verbs/answered",display:{"de-DE":"beantwortete","en-US":"answered","fr-FR":"a répondu","es-ES":"contestó","ar-AR":"أجاب"}},asked:{id:"http://adlnet.gov/expapi/verbs/asked",display:{"de-DE":"fragte","en-US":"asked","fr-FR":"a demandé","es-ES":"preguntó","ar-AR":"طلب"}},attempted:{id:"http://adlnet.gov/expapi/verbs/attempted",display:{"de-DE":"versuchte","en-US":"attempted","fr-FR":"a essayé","es-ES":"intentó","ar-AR":"حاول"}},attended:{id:"http://adlnet.gov/expapi/verbs/attended",display:{"de-DE":"nahm teil an","en-US":"attended","fr-FR":"a suivi","es-ES":"asistió","ar-AR":"حضر"}},commented:{id:"http://adlnet.gov/expapi/verbs/commented",display:{"de-DE":"kommentierte","en-US":"commented","fr-FR":"a commenté","es-ES":"comentó","ar-AR":"علق"}},completed:{id:"http://adlnet.gov/expapi/verbs/completed",display:{"de-DE":"beendete","en-US":"completed","fr-FR":"a terminé","es-ES":"completó","ar-AR":"أكمل"}},exited:{id:"http://adlnet.gov/expapi/verbs/exited",display:{"de-DE":"verließ","en-US":"exited","fr-FR":"a quitté","es-ES":"salió","ar-AR":"خرج"}},experienced:{id:"http://adlnet.gov/expapi/verbs/experienced",display:{"de-DE":"erlebte","en-US":"experienced","fr-FR":"a éprouvé","es-ES":"experimentó","ar-AR":"شاهد"}},failed:{id:"http://adlnet.gov/expapi/verbs/failed",display:{"de-DE":"verfehlte","en-US":"failed","fr-FR":"a échoué","es-ES":"fracasó","ar-AR":"فشل"}},imported:{id:"http://adlnet.gov/expapi/verbs/imported",display:{"de-DE":"importierte","en-US":"imported","fr-FR":"a importé","es-ES":"importó","ar-AR":"مستورد"}},initialized:{id:"http://adlnet.gov/expapi/verbs/initialized",display:{"de-DE":"initialisierte","en-US":"initialized","fr-FR":"a initialisé","es-ES":"inicializó","ar-AR":"بدأ"}},interacted:{id:"http://adlnet.gov/expapi/verbs/interacted",display:{"de-DE":"interagierte","en-US":"interacted","fr-FR":"a interagi","es-ES":"interactuó","ar-AR":"تفاعل"}},launched:{id:"http://adlnet.gov/expapi/verbs/launched",display:{"de-DE":"startete","en-US":"launched","fr-FR":"a lancé","es-ES":"lanzó","ar-AR":"أطلق"}},mastered:{id:"http://adlnet.gov/expapi/verbs/mastered",display:{"de-DE":"meisterte","en-US":"mastered","fr-FR":"a maîtrisé","es-ES":"dominó","ar-AR":"أتقن"}},passed:{id:"http://adlnet.gov/expapi/verbs/passed",display:{"de-DE":"bestand","en-US":"passed","fr-FR":"a réussi","es-ES":"aprobó","ar-AR":"نجح"}},preferred:{id:"http://adlnet.gov/expapi/verbs/preferred",display:{"de-DE":"bevorzugte","en-US":"preferred","fr-FR":"a préféré","es-ES":"prefirió","ar-AR":"فضل"}},progressed:{id:"http://adlnet.gov/expapi/verbs/progressed",display:{"de-DE":"machte Fortschritt mit","en-US":"progressed","fr-FR":"a progressé","es-ES":"progresó","ar-AR":"تقدم"}},registered:{id:"http://adlnet.gov/expapi/verbs/registered",display:{"de-DE":"registrierte","en-US":"registered","fr-FR":"a enregistré","es-ES":"registró","ar-AR":"سجل"}},responded:{id:"http://adlnet.gov/expapi/verbs/responded",display:{"de-DE":"reagierte","en-US":"responded","fr-FR":"a répondu","es-ES":"respondió","ar-AR":"استجاب"}},resumed:{id:"http://adlnet.gov/expapi/verbs/resumed",display:{"de-DE":"setzte fort","en-US":"resumed","fr-FR":"a repris","es-ES":"continuó","ar-AR":"استأنف"}},satisfied:{id:"https://w3id.org/xapi/adl/verbs/satisfied",display:{"de-DE":"befriedigt","en-US":"satisfied","fr-FR":"satisfaite","es-ES":"satisfecho","ar-AR":"راض"}},scored:{id:"http://adlnet.gov/expapi/verbs/scored",display:{"de-DE":"erreichte","en-US":"scored","fr-FR":"a marqué","es-ES":"anotó","ar-AR":"سحل النقاط"}},shared:{id:"http://adlnet.gov/expapi/verbs/shared",display:{"de-DE":"teilte","en-US":"shared","fr-FR":"a partagé","es-ES":"compartió","ar-AR":"شارك"}},suspended:{id:"http://adlnet.gov/expapi/verbs/suspended",display:{"de-DE":"pausierte","en-US":"suspended","fr-FR":"a suspendu","es-ES":"aplazó","ar-AR":"علق"}},terminated:{id:"http://adlnet.gov/expapi/verbs/terminated",display:{"de-DE":"beendete","en-US":"terminated","fr-FR":"a terminé","es-ES":"terminó","ar-AR":"أنهى"}},voided:{id:"http://adlnet.gov/expapi/verbs/voided",display:{"de-DE":"entwertete","en-US":"voided","fr-FR":"a annulé","es-ES":"anuló","ar-AR":"فرغ"}},waived:{id:"https://w3id.org/xapi/adl/verbs/waived",display:{"de-DE":"verzichtet","en-US":"waived","fr-FR":"renoncé","es-ES":"renunciado","ar-AR":"تخلى"}}},function(T){function e(t){var e=String(t);return 1===e.length&&(e="0"+e),e}function r(t){return CryptoJS&&CryptoJS.enc.Base64?CryptoJS.enc.Base64.stringify(CryptoJS.enc.Latin1.parse(t)):Base64.encode(t)}function p(t){if("[object Date]"===Object.prototype.toString.call(t))var e=t;else e=new Date(t);return"[object Date]"===Object.prototype.toString.call(e)?isNaN(e.valueOf())?(T.XAPIWrapper.log("Invalid date String passed"),null):e:(T.XAPIWrapper.log("Invalid date object"),null)}d.debug=!1;var t,i=((t={endpoint:"http://localhost:8000/xapi/"}).auth="Basic "+r("tom:1234"),t),n=function(t,e){function i(t){var e=document.createElement("a");if(e.href=t,e.protocol&&e.host)return e.protocol+"//"+e.host;if(e.href){var i=e.href.split("//");return i[0]+"//"+i[1].substr(0,i[1].indexOf("/"))}T.XAPIWrapper.log("Couldn't create base url from endpoint: "+t)}function n(t,e,i){t.auth="Basic "+r(e+":"+i)}this.lrs=function(t){var e,i,n=["endpoint","auth","actor","registration","activity_id","grouping","activity_platform"],r=new Object;if(void 0!==(e=function(){var t,e,i,n,r;for(t=window.location.search.substr(1),e=t.split("&"),r={},n=0;n<e.length;n++)2===(i=e[n].split("=")).length&&i[0]&&(r[i[0]]=decodeURIComponent(i[1]));return r}())&&0!==Object.keys(e).length){for(var s=0;s<n.length;s++)e[i=n[s]]&&(r[i]=e[i],delete e[i]);0!==Object.keys(e).length&&(r.extended=e),r=o(t,r)}else r=t;return r}(t||{}),this.lrs.user&&this.lrs.password&&n(this.lrs,this.lrs.user,this.lrs.password),this.base=i(this.lrs.endpoint),this.withCredentials=!1,t&&void 0!==t.withCredentials&&(this.withCredentials=t.withCredentials),this.strictCallbacks=!1,this.strictCallbacks=t&&t.strictCallbacks,e&&a.call(this)&&window.ADL.XHR_request(this.lrs,this.lrs.endpoint+"about","GET",null,null,function(t){if(200==t.status)try{var e=JSON.parse(t.response),i=!1;for(var n in e.version)if(e.version.hasOwnProperty(n)&&e.version[n]==T.XAPIWrapper.xapiVersion){i=!0;break}i||T.XAPIWrapper.log("The lrs version ["+e.version+"] does not match this wrapper's XAPI version ["+T.XAPIWrapper.xapiVersion+"]")}catch(t){T.XAPIWrapper.log("The response was not an about object")}else T.XAPIWrapper.log("The request to get information about the LRS failed: "+t)},null,!1,null,this.withCredentials,!1),this.searchParams=function(){return{format:"exact"}},this.hash=function(t){if(!t)return null;try{return e=t,CryptoJS&&CryptoJS.SHA1?CryptoJS.SHA1(e).toString():Crypto.util.bytesToHex(Crypto.SHA1(e,{asBytes:!0}))}catch(t){return T.XAPIWrapper.log("Error trying to hash -- "+t),null}var e},this.changeConfig=function(t){try{T.XAPIWrapper.log("updating lrs object with new configuration"),this.lrs=o(this.lrs,t),t.user&&t.password&&this.updateAuth(this.lrs,t.user,t.password),this.base=i(this.lrs.endpoint),this.withCredentials=t.withCredentials,this.strictCallbacks=t.strictCallbacks}catch(t){T.XAPIWrapper.log("error while changing configuration -- "+t)}},this.updateAuth=n};function a(){try{return null!=this.lrs.endpoint&&""!=this.lrs.endpoint}catch(t){return!1}}function d(t){if(!d.debug)return!1;try{return console.log(t),!0}catch(t){return!1}}function o(e,i){for(var n in i)if(0!=i.hasOwnProperty(n)){d(n+" : "+i[n]);try{i[n].constructor==Object?e[n]=o(e[n],i[n]):(null==e&&(e=new Object),e[n]=i[n])}catch(t){null==e&&(e=new Object),e[n]=i[n]}}return e}n.prototype.xapiVersion="1.0.1",n.prototype.prepareStatement=function(t){void 0===t.actor?t.actor=JSON.parse(this.lrs.actor):"string"==typeof t.actor&&(t.actor=JSON.parse(t.actor)),(this.lrs.grouping||this.lrs.registration||this.lrs.activity_platform)&&(t.context||(t.context={})),this.lrs.grouping&&(t.context.contextActivities||(t.context.contextActivities={}),t.context.contextActivities.grouping=[{id:this.lrs.grouping}]),this.lrs.registration&&(t.context.registration=this.lrs.registration),this.lrs.activity_platform&&(t.context.platform=this.lrs.activity_platform)},n.prototype.testConfig=a,n.prototype.log=d,n.prototype.defaultEncoding="utf-8",n.prototype.sendStatement=function(t,e,i){if(this.testConfig()){var n;this.prepareStatement(t),t.id?n=t.id:(n=T.ruuid(),t.id=n);var r=JSON.stringify(t),s=null;i&&0<i.length&&(s={},r=this.buildMultipartPost(t,i,s));var a=T.XHR_request(this.lrs,this.lrs.endpoint+"statements","POST",r,this.lrs.auth,e,{id:n},null,s,this.withCredentials,this.strictCallbacks);if(!e)return{xhr:a,id:n}}},n.prototype.buildMultipartPost=function(t,e,i){t.attachments=[];for(var n=0;n<e.length;n++){if("signature"==e[n].type&&(e[n].type={usageType:"http://adlnet.gov/expapi/attachments/signature",display:{"en-US":"A JWT signature"},description:{"en-US":"A signature proving the statement was not modified"},contentType:"application/octet-stream"}),"string"==typeof e[n].value)throw"ADL.buildMultipartPost: Cannot send string attachments as TextEncoder is unsupported in <=ie9.";e[n].type.length=e[n].value.byteLength,e[n].type.sha2=(r=e[n].value,CryptoJS.SHA256(r).toString(CryptoJS.enc.Hex)),t.attachments.push(e[n].type)}var r,s=[],a=(Math.random()+" ").substring(2,10)+(Math.random()+" ").substring(2,10);i["Content-Type"]="multipart/mixed; boundary="+a;var o="\r\n",p=["--"+a,"Content-Type: application/json",'Content-Disposition: form-data; name="statement"',"",JSON.stringify(t)].join(o)+o;for(var n in s.push(p),e)if(e.hasOwnProperty(n)){var c=["--"+a,"Content-Type: "+e[n].type.contentType,"Content-Transfer-Encoding: binary","X-Experience-API-Hash: "+e[n].type.sha2].join(o)+o+o;s.push(c),s.push(e[n].value)}return s.push(o+"--"+a+"--"+o),new Blob(s)},n.prototype.sendStatements=function(t,e){if(this.testConfig()){for(var i in t)t.hasOwnProperty(i)&&this.prepareStatement(t[i]);var n=T.XHR_request(this.lrs,this.lrs.endpoint+"statements","POST",JSON.stringify(t),this.lrs.auth,e,null,!1,null,this.withCredentials,this.strictCallbacks);if(!e)return n}},n.prototype.getStatements=function(t,e,i){if(this.testConfig()){var n=this.lrs.endpoint+"statements";if(e)n=this.base+e;else{var r=new Array;for(s in t)if(t.hasOwnProperty(s))if("until"==s||"since"==s){var a=new Date(t[s]);r.push(s+"="+encodeURIComponent(T.dateToISOString(a)))}else r.push(s+"="+encodeURIComponent(t[s]));0<r.length&&(n=n+"?"+r.join("&"))}var o=T.XHR_request(this.lrs,n,"GET",null,this.lrs.auth,i,null,!1,null,this.withCredentials,this.strictCallbacks);if(void 0===o||404==o.status)return null;try{return JSON.parse(o.response)}catch(t){return o.response}}},n.prototype.getActivities=function(t,e){if(this.testConfig()){var i=this.lrs.endpoint+"activities?activityId=<activityid>";i=i.replace("<activityid>",encodeURIComponent(t));var n=T.XHR_request(this.lrs,i,"GET",null,this.lrs.auth,e,null,!0,null,this.withCredentials,this.strictCallbacks);if(void 0===n||404==n.status)return null;try{return JSON.parse(n.response)}catch(t){return n.response}}},n.prototype.sendState=function(t,e,i,n,r,s,a,o){if(this.testConfig()){var p=this.lrs.endpoint+"activities/state?activityId=<activity ID>&agent=<agent>&stateId=<stateid>";p=(p=(p=p.replace("<activity ID>",encodeURIComponent(t))).replace("<agent>",encodeURIComponent(JSON.stringify(e)))).replace("<stateid>",encodeURIComponent(i)),n&&(p+="&registration="+encodeURIComponent(n));var c=null;s&&a?d("Can't have both If-Match and If-None-Match"):s?c={"If-Match":T.formatHash(s)}:a&&(c={"If-None-Match":T.formatHash(a)});var l="PUT";if(!r)return this.log("No activity state was included."),!1;r instanceof Array?(r=JSON.stringify(r),(c=c||{})["Content-Type"]="application/json"):r instanceof Object?(r=JSON.stringify(r),(c=c||{})["Content-Type"]="application/json",l="POST"):(c=c||{})["Content-Type"]="application/octet-stream",T.XHR_request(this.lrs,p,l,r,this.lrs.auth,o,null,null,c,this.withCredentials,this.strictCallbacks)}},n.prototype.getState=function(t,e,i,n,r,s){if(this.testConfig()){var a=this.lrs.endpoint+"activities/state?activityId=<activity ID>&agent=<agent>";a=(a=a.replace("<activity ID>",encodeURIComponent(t))).replace("<agent>",encodeURIComponent(JSON.stringify(e))),i&&(a+="&stateId="+encodeURIComponent(i)),n&&(a+="&registration="+encodeURIComponent(n)),r&&null!=(r=p(r))&&(a+="&since="+encodeURIComponent(T.dateToISOString(r)));var o=T.XHR_request(this.lrs,a,"GET",null,this.lrs.auth,s,null,!0,null,this.withCredentials,this.strictCallbacks);if(void 0===o||404==o.status)return null;try{return JSON.parse(o.response)}catch(t){return o.response}}},n.prototype.deleteState=function(t,e,i,n,r,s,a){if(this.testConfig()){var o=this.lrs.endpoint+"activities/state?activityId=<activity ID>&agent=<agent>&stateId=<stateid>";o=(o=(o=o.replace("<activity ID>",encodeURIComponent(t))).replace("<agent>",encodeURIComponent(JSON.stringify(e)))).replace("<stateid>",encodeURIComponent(i)),n&&(o+="&registration="+encodeURIComponent(n));var p=null;r&&s?d("Can't have both If-Match and If-None-Match"):r?p={"If-Match":T.formatHash(r)}:s&&(p={"If-None-Match":T.formatHash(s)});var c=T.XHR_request(this.lrs,o,"DELETE",null,this.lrs.auth,a,null,!1,p,this.withCredentials,this.strictCallbacks);if(void 0===c||404==c.status)return null;try{return JSON.parse(c.response)}catch(t){return c}}},n.prototype.sendActivityProfile=function(t,e,i,n,r,s){if(this.testConfig()){var a=this.lrs.endpoint+"activities/profile?activityId=<activity ID>&profileId=<profileid>";a=(a=a.replace("<activity ID>",encodeURIComponent(t))).replace("<profileid>",encodeURIComponent(e));var o=null;n&&r?d("Can't have both If-Match and If-None-Match"):n?o={"If-Match":T.formatHash(n)}:r&&(o={"If-None-Match":T.formatHash(r)});var p="PUT";if(!i)return this.log("No activity profile was included."),!1;i instanceof Array?(i=JSON.stringify(i),(o=o||{})["Content-Type"]="application/json"):i instanceof Object?(i=JSON.stringify(i),(o=o||{})["Content-Type"]="application/json",p="POST"):(o=o||{})["Content-Type"]="application/octet-stream",T.XHR_request(this.lrs,a,p,i,this.lrs.auth,s,null,!1,o,this.withCredentials,this.strictCallbacks)}},n.prototype.getActivityProfile=function(t,e,i,n){if(this.testConfig()){var r=this.lrs.endpoint+"activities/profile?activityId=<activity ID>";r=r.replace("<activity ID>",encodeURIComponent(t)),e&&(r+="&profileId="+encodeURIComponent(e)),i&&null!=(i=p(i))&&(r+="&since="+encodeURIComponent(T.dateToISOString(i)));var s=T.XHR_request(this.lrs,r,"GET",null,this.lrs.auth,n,null,!0,null,this.withCredentials,this.strictCallbacks);if(void 0===s||404==s.status)return null;try{return JSON.parse(s.response)}catch(t){return s.response}}},n.prototype.deleteActivityProfile=function(t,e,i,n,r){if(this.testConfig()){var s=this.lrs.endpoint+"activities/profile?activityId=<activity ID>&profileId=<profileid>";s=(s=s.replace("<activity ID>",encodeURIComponent(t))).replace("<profileid>",encodeURIComponent(e));var a=null;i&&n?d("Can't have both If-Match and If-None-Match"):i?a={"If-Match":T.formatHash(i)}:n&&(a={"If-None-Match":T.formatHash(n)});var o=T.XHR_request(this.lrs,s,"DELETE",null,this.lrs.auth,r,null,!1,a,this.withCredentials,this.strictCallbacks);if(void 0===o||404==o.status)return null;try{return JSON.parse(o.response)}catch(t){return o}}},n.prototype.getAgents=function(t,e){if(this.testConfig()){var i=this.lrs.endpoint+"agents?agent=<agent>";i=i.replace("<agent>",encodeURIComponent(JSON.stringify(t)));var n=T.XHR_request(this.lrs,i,"GET",null,this.lrs.auth,e,null,!0,null,this.withCredentials,this.strictCallbacks);if(void 0===n||404==n.status)return null;try{return JSON.parse(n.response)}catch(t){return n.response}}},n.prototype.sendAgentProfile=function(t,e,i,n,r,s){if(this.testConfig()){var a=this.lrs.endpoint+"agents/profile?agent=<agent>&profileId=<profileid>";a=(a=a.replace("<agent>",encodeURIComponent(JSON.stringify(t)))).replace("<profileid>",encodeURIComponent(e));var o=null;n&&r?d("Can't have both If-Match and If-None-Match"):n?o={"If-Match":T.formatHash(n)}:r&&(o={"If-None-Match":T.formatHash(r)});var p="PUT";if(!i)return this.log("No agent profile was included."),!1;i instanceof Array?(i=JSON.stringify(i),(o=o||{})["Content-Type"]="application/json"):i instanceof Object?(i=JSON.stringify(i),(o=o||{})["Content-Type"]="application/json",p="POST"):(o=o||{})["Content-Type"]="application/octet-stream",T.XHR_request(this.lrs,a,p,i,this.lrs.auth,s,null,!1,o,this.withCredentials,this.strictCallbacks)}},n.prototype.getAgentProfile=function(t,e,i,n){if(this.testConfig()){var r=this.lrs.endpoint+"agents/profile?agent=<agent>";r=(r=r.replace("<agent>",encodeURIComponent(JSON.stringify(t)))).replace("<profileid>",encodeURIComponent(e)),e&&(r+="&profileId="+encodeURIComponent(e)),i&&null!=(i=p(i))&&(r+="&since="+encodeURIComponent(T.dateToISOString(i)));var s=T.XHR_request(this.lrs,r,"GET",null,this.lrs.auth,n,null,!0,null,this.withCredentials,this.strictCallbacks);if(void 0===s||404==s.status)return null;try{return JSON.parse(s.response)}catch(t){return s.response}}},n.prototype.deleteAgentProfile=function(t,e,i,n,r){if(this.testConfig()){var s=this.lrs.endpoint+"agents/profile?agent=<agent>&profileId=<profileid>";s=(s=s.replace("<agent>",encodeURIComponent(JSON.stringify(t)))).replace("<profileid>",encodeURIComponent(e));var a=null;i&&n?d("Can't have both If-Match and If-None-Match"):i?a={"If-Match":T.formatHash(i)}:n&&(a={"If-None-Match":T.formatHash(n)});var o=T.XHR_request(this.lrs,s,"DELETE",null,this.lrs.auth,r,null,!1,a,this.withCredentials,this.strictCallbacks);if(void 0===o||404==o.status)return null;try{return JSON.parse(o.response)}catch(t){return o}}},T.ruuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},T.dateFromISOString=function(t){var e=t.match(new RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T| ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?")),i=0,n=new Date(e[1],0,1);e[3]&&n.setMonth(e[3]-1),e[5]&&n.setDate(e[5]),e[7]&&n.setHours(e[7]),e[8]&&n.setMinutes(e[8]),e[10]&&n.setSeconds(e[10]),e[12]&&n.setMilliseconds(1e3*Number("0."+e[12])),e[14]&&(i=60*Number(e[16])+Number(e[17]),i*="-"==e[15]?1:-1),i-=n.getTimezoneOffset(),time=Number(n)+60*i*1e3;var r=new Date;return r.setTime(Number(time)),r},T.dateToISOString=function(t){return Date.prototype.toISOString?t.toISOString():t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},T.XHR_request=function(t,n,r,e,i,s,a,o,p,c,l){"use strict";var d,u,h,f,g,v,y=!1,m=!1,S=!1,b=n.toLowerCase().match(/^(.+):\/\/([^:\/]*):?(\d+)?(\/.*)?$/),w=window.location,x={"Content-Type":"application/json"};if(x.Authorization=i,x["X-Experience-API-Version"]=T.XAPIWrapper.xapiVersion,null!==p)for(var C in p)p.hasOwnProperty(C)&&(x[C]=p[C]);if((m=w.protocol.toLowerCase()!==b[1]||w.hostname.toLowerCase()!==b[2])||(m=(null===b[3]?"http"===b[1]?"80":"443":b[3])===w.port),null!==t&&void 0!==t.extended){for(g in f=new Array,t.extended)f.push(g+"="+encodeURIComponent(t.extended[g]));0<f.length&&(n+=(-1<n.indexOf("?")?"&":"?")+f.join("&"))}var I,A,R=window.XDomainRequest&&window.XMLHttpRequest&&void 0===(new XMLHttpRequest).responseType;if(m&&void 0!==R&&!1!==R)S=!0,u=function(t,e,i,n){var r=e,s=new Array,a=r.indexOf("?");if(0<a&&(s.push(r.substr(a+1)),r=r.substr(0,a)),r=r+"?method="+t,null!==i)for(var o in i)i.hasOwnProperty(o)&&s.push(o+"="+encodeURIComponent(i[o]));return null!==n&&s.push("content="+encodeURIComponent(n)),{method:"POST",url:r,headers:{},data:s.join("&")}}(r,n,x,e),(d=new XDomainRequest).open(u.method,u.url);else for(var C in(d=new XMLHttpRequest).withCredentials=c,d.open(r,n,null!=s),x)d.setRequestHeader(C,x[C]);function _(){if(y)return h;y=!0;var t=o&&404===d.status;if(!(void 0===d.status||200<=d.status&&d.status<400||t)){var e;try{e="There was a problem communicating with the Learning Record Store. ( "+d.status+" | "+d.response+" )"+n}catch(t){e=t.toString()}return T.XAPIWrapper.log(e),T.xhrRequestOnError(d,r,n,s,a,l),h=d}if(!s)return h=d;if(a)l?s(null,d,a):s(d,a);else{var i;try{i=JSON.parse(d.responseText)}catch(t){i=d.responseText}l?s(null,d,i):s(d,i)}}if(d.onreadystatechange=function(){if(4===d.readyState)return _()},d.onload=_,d.onerror=_,d.send(S?u.data:e),!s){if(S)for(v=1e3+new Date;new Date<v&&4!==d.readyState&&!y;)I=void 0,I=new XMLHttpRequest,A=window.location+"?forcenocache="+T.ruuid(),I.open("GET",A,!1),I.send(null);return _()}},T.xhrRequestOnError=function(e,t,i,n,r,s){if(n&&s){var a,o=e?e.status:void 0;if(a=o?new Error("Request error: "+e.status):0===o||null===o?new Error("Request error: aborted"):new Error("Reqeust error: unknown"),r)n(a,e,r);else{var p;try{p=JSON.parse(e.responseText)}catch(t){p=e.responseText}n(a,e,p)}}},T.formatHash=function(t){return"*"===t?t:'"'+t+'"'},T.XAPIWrapper=new n(i,!1)}(window.ADL=window.ADL||{}),function(a){function r(t,e){var i=e.split("."),n=i[0];return e=i.slice(1).join("."),t[n]||(/\[\]$/.test(n)?t[n=n.slice(0,-2)]=[]:t[n]={}),e?r(t[n],e):t[n]}var n=function(t,e,i,n){if(t&&t.actor&&t.verb&&t.object){var r=t;for(var s in r)"actor"!=s&&"verb"!=s&&"object"!=s&&(this[s]=r[s]);t=r.actor,e=r.verb,i=r.object}t?t instanceof o?this.actor=t:"Agent"!==t.objectType&&t.objectType?"Group"===t.objectType&&(this.actor=new p(t)):this.actor=new o(t):this.actor=null,this.verb=e?e instanceof c?e:new c(e):null,i?"Activity"!==i.objectType&&i.objectType?"Agent"===i.objectType?this.object=i instanceof o?i:new o(i):"Group"===i.objectType?this.object=i instanceof p?i:new p(i):"StatementRef"===i.objectType?this.object=i instanceof d?i:new d(i):"SubStatement"===i.objectType?this.object=i instanceof u?i:new u(i):this.object=null:this.object=i instanceof l?i:new l(i):this.object=null,n&&(this.result=n),this.generateId=function(){this.id=a.ruuid()}};n.prototype.toString=function(){return this.actor.toString()+" "+this.verb.toString()+" "+this.object.toString()+" "+this.result.toString()},n.prototype.isValid=function(){return this.actor&&this.actor.isValid()&&this.verb&&this.verb.isValid()&&this.object&&this.object.isValid()&&this.result&&this.result.isValid()},n.prototype.generateRegistration=function(){r(this,"context").registration=a.ruuid()},n.prototype.addParentActivity=function(t){r(this,"context.contextActivities.parent[]").push(new l(t))},n.prototype.addGroupingActivity=function(t){r(this,"context.contextActivities.grouping[]").push(new l(t))},n.prototype.addOtherContextActivity=function(t){r(this,"context.contextActivities.other[]").push(new l(t))};var o=function(t,e){if(this.objectType="Agent",this.name=e,t&&(t.mbox||t.mbox_sha1sum||t.openid||t.account))for(var i in t)this[i]=t[i];else/^mailto:/.test(t)?this.mbox=t:/^[0-9a-f]{40}$/i.test(t)?this.mbox_sha1sum=t:/^http[s]?:/.test(t)?this.openid=t:t&&t.homePage&&t.name&&(this.account=t)};o.prototype.toString=function(){return this.name||this.mbox||this.openid||this.mbox_sha1sum||this.account.name},o.prototype.isValid=function(){return this.mbox||this.mbox_sha1sum||this.openid||this.account.homePage&&this.account.name||"Group"===this.objectType&&this.member};var p=function(t,e,i){o.call(this,t,i),this.member=e,this.objectType="Group"};p.prototype=new o;var c=function(t,e){if(t&&t.id)for(var i in t)this[i]=t[i];else this.id=t,e&&("string"==typeof e||e instanceof String?this.display={"en-US":e}:this.display=e)};c.prototype.toString=function(){return this.display&&(this.display["en-US"]||this.display.en)?this.display["en-US"]||this.display.en:this.id},c.prototype.isValid=function(){return this.id};var l=function(t,e,i){if(t&&t.id){var n=t;for(var r in n)this[r]=n[r]}else this.objectType="Activity",this.id=t,(e||i)&&(this.definition={},"string"==typeof e||e instanceof String?this.definition.name={"en-US":e}:e&&(this.definition.name=e),"string"==typeof i||i instanceof String?this.definition.description={"en-US":i}:i&&(this.definition.description=i))};l.prototype.toString=function(){return this.definition&&this.definition.name&&(this.definition.name["en-US"]||this.definition.name.en)?this.definition.name["en-US"]||this.definition.name.en:this.id},l.prototype.isValid=function(){return this.id&&(!this.objectType||"Activity"===this.objectType)};var d=function(t){if(t&&t.id)for(var e in t)this[e]=t[e];else this.objectType="StatementRef",this.id=t};d.prototype.toString=function(){return"statement("+this.id+")"},d.prototype.isValid=function(){return this.id&&this.objectType&&"StatementRef"===this.objectType};var u=function(t,e,i){n.call(this,t,e,i),this.objectType="SubStatement",delete this.id,delete this.stored,delete this.version,delete this.authority};u.prototype=new n,u.prototype.toString=function(){return'"'+u.prototype.prototype.toString.call(this)+'"'},n.Agent=o,n.Group=p,n.Verb=c,n.Activity=l,n.StatementRef=d,n.SubStatement=u,a.XAPIStatement=n}(window.ADL=window.ADL||{}),function(t){var o=t,e=!1;"undefined"!=typeof window&&(o=window.ADL=t.ADL||{},e=!0);var n=function(t){if("SubStatement"===t.objectType&&("SubStatement"!==t.object.objectType&&!(t.id||t.stored||t.version||t.authority)))return o.xapiutil.getActorId(t.actor)+":"+o.xapiutil.getVerbDisplay(t.verb)+":"+o.xapiutil.getObjectId(t.object)};o.xapiutil={},o.xapiutil.getLang=function(){var t;if("undefined"!=typeof navigator)t=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage;else if("undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.LANG){var e=process.env.LANG;t=(t=e.slice(0,e.indexOf("."))).replace(/_/,"-")}return t||"en-US"},o.xapiutil.getLangVal=function(t){if(t&&0!=Object.keys(t).length){for(var e,i=o.xapiutil.getLang(),n=!1;t[i]?(e=t[i],n=!0):i.indexOf("-")&&(i=i.substring(0,i.lastIndexOf("-"))),!n&&""!==i;);return e}},o.xapiutil.getMoreStatements=function(n,r,s){if(!e)throw new Error("Node not supported.");var a=[];o.XAPIWrapper.getStatements(s,null,function t(e){if(e&&e.response){var i=JSON.parse(e.response);i.statements&&(a=a.concat(i.statements),n--<=0?r(a):i.more&&""!==i.more?o.XAPIWrapper.getStatements(s,i.more,t):""===i.more&&r(a))}})},o.xapiutil.getActorId=function(t){return t.mbox||t.openid||t.mbox_sha1sum||t.account},o.xapiutil.getActorIdString=function(t){var e=t.mbox||t.openid||t.mbox_sha1sum;return e||(e=t.account?t.account.homePage+":"+t.account.name:t.member?"Anon Group "+t.member:"unknown"),e},o.xapiutil.getActorDisplay=function(t){return t.name||o.xapiutil.getActorIdString(t)},o.xapiutil.getVerbDisplay=function(t){if(t)return t.display&&o.xapiutil.getLangVal(t.display)||t.id},o.xapiutil.getObjectType=function(t){return t.objectType||(t.id?"Activity":"Agent")},o.xapiutil.getObjectId=function(t){if(t.id)return t.id;var e=o.xapiutil.getObjectType(t);return"Agent"===e||"Group"===e?o.xapiutil.getActorId(t):void 0},o.xapiutil.getObjectIdString=function(t){if(!t)return"unknown";if(t.id)return t.id;var e=o.xapiutil.getObjectType(t);return"Agent"===e||"Group"===e?o.xapiutil.getActorIdString(t):"SubStatement"==e?n(t):"unknown"},o.xapiutil.getObjectDisplay=function(t){if(!t)return"unknown";var e=function(t){if(t.definition&&t.definition.name)return o.xapiutil.getLangVal(t.definition.name)}(t)||t.name||t.id;if(!e){var i=o.xapiutil.getObjectType(t);"Agent"===i||"Group"==i?e=o.xapiutil.getActorDisplay(t):"SubStatement"==i&&(e=n(t))}return e}}(this),function(t){var d=window.ADL=window.ADL||{};function u(t){for(var e=window.location.search.substring(1).split("&"),i=0;i<e.length;i++){var n=e[i].split("=");if(decodeURIComponent(n[0])==t)return decodeURIComponent(n[1])}}function h(t){var e="xAPILaunchKey="+u("xAPILaunchKey")+"&xAPILaunchService="+u("xAPILaunchService");u("encrypted")&&(e+="&encrypted=true");for(var i=0;i<t.length;i++){var n=t[i],r=n.href,s=n.attributes.getNamedItem("courselink");s&&"true"==s.value&&(r=-1<r.indexOf("?")?r+"&"+e:r+"?"+e,n.href=r)}}d.launch=function a(o,p,c){var n;n=o,o=function(){var i=arguments;window.setTimeout(function(){for(var t=[],e=0;e<i.length;e++)t.push(i[e]);n.apply(window,t)},0)};try{var r=u("xAPILaunchKey"),s=u("xAPILaunchService");if(u("encrypted"),a.terminate=function(t){var e=new URL(s);e.pathname+="launch/"+r+"/terminate";var i=new XMLHttpRequest;i.withCredentials=!0,i.crossDomain=!0,i.open("POST",e.toString(),!1),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify({code:0,description:t||"User closed content"}))},!r||!s)return o("invalid launch parameters");var t=new URL(s);t.pathname+="launch/"+r;var l=new XMLHttpRequest;l.withCredentials=!0,l.crossDomain=!0,l.onerror=function(t){window.setTimeout(function(){return o(t)})},l.onload=function(t){if(200!==l.status)return l.onerror(l.responseText);var e=JSON.parse(l.responseText),i=e,n={};n.endpoint=i.endpoint,n.actor=i.actor,n.withCredentials=!0,n.strictCallbacks=c||!1,window.onunload=function(){p&&a.terminate("User closed content")};var r,s=new d.XAPIWrapper.constructor;return s.changeConfig(n),h(document.body.querySelectorAll("a")),r=document.body,new MutationObserver(function(t){t.forEach(function(t){for(var e in t.addedNodes)t.addedNodes.hasOwnProperty(e)&&t.addedNodes[e].constructor==HTMLAnchorElement&&h([t.addedNodes[e]])})}).observe(r,{attributes:!0,childList:!0,subtree:!0}),o(null,e,s)},l.open("POST",t.toString(),!0),l.send()}catch(t){o(t)}}}();