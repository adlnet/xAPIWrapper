/*! xAPIWrapper v 1.6.0 | Built on 2016-01-08 12:56:36-0500 */
function toBase64(a){return CryptoJS&&CryptoJS.enc.Base64?CryptoJS.enc.Base64.stringify(CryptoJS.enc.Latin1.parse(a)):Base64.encode(a)}function toSHA1(a){return CryptoJS&&CryptoJS.SHA1?CryptoJS.SHA1(a).toString():Crypto.util.bytesToHex(Crypto.SHA1(a,{asBytes:!0}))}function isDate(a){if("[object Date]"===Object.prototype.toString.call(a))var b=a;else var b=new Date(a);return"[object Date]"===Object.prototype.toString.call(b)?isNaN(b.valueOf())?(ADL.XAPIWrapper.log("Invalid date String passed"),null):b:(ADL.XAPIWrapper.log("Invalid date object"),null)}var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=d.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;return b&&c.mixIn(b),c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)}),c.init.prototype=c,c.$super=this,c},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=d.WordArray=e.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||h).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes,e=a.sigBytes;if(this.clamp(),d%4)for(var f=0;e>f;f++){var g=c[f>>>2]>>>24-f%4*8&255;b[d+f>>>2]|=g<<24-(d+f)%4*8}else if(c.length>65535)for(var f=0;e>f;f+=4)b[d+f>>>2]=c[f>>>2];else b.push.apply(b,c);return this.sigBytes+=e,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-c%4*8,b.length=a.ceil(c/4)},clone:function(){var a=e.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new f.init(c,b)}}),g=c.enc={},h=g.Hex={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;c>e;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push((f>>>4).toString(16)),d.push((15&f).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-d%8*4;return new f.init(c,b/2)}},i=g.Latin1={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;c>e;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push(String.fromCharCode(f))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-d%4*8;return new f.init(c,b)}},j=g.Utf8={stringify:function(a){try{return decodeURIComponent(escape(i.stringify(a)))}catch(b){throw new Error("Malformed UTF-8 data")}},parse:function(a){return i.parse(unescape(encodeURIComponent(a)))}},k=(g.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp();for(var e=[],f=0;c>f;f+=3)for(var g=b[f>>>2]>>>24-f%4*8&255,h=b[f+1>>>2]>>>24-(f+1)%4*8&255,i=b[f+2>>>2]>>>24-(f+2)%4*8&255,j=g<<16|h<<8|i,k=0;4>k&&c>f+.75*k;k++)e.push(d.charAt(j>>>6*(3-k)&63));var l=d.charAt(64);if(l)for(;e.length%4;)e.push(l);return e.join("")},parse:function(a){var b=a.length,c=this._map,d=c.charAt(64);if(d){var e=a.indexOf(d);-1!=e&&(b=e)}for(var g=[],h=0,i=0;b>i;i++)if(i%4){var j=c.indexOf(a.charAt(i-1))<<i%4*2,k=c.indexOf(a.charAt(i))>>>6-i%4*2;g[h>>>2]|=(j|k)<<24-h%4*8,h++}return f.create(g,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},d.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,g=this.blockSize,h=4*g,i=e/h;i=b?a.ceil(i):a.max((0|i)-this._minBufferSize,0);var j=i*g,k=a.min(4*j,e);if(j){for(var l=0;j>l;l+=g)this._doProcessBlock(d,l);var m=d.splice(0,j);c.sigBytes-=k}return new f.init(m,k)},clone:function(){var a=e.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0})),l=d.Hasher=k.extend({cfg:e.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){a&&this._append(a);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}}),m=c.algo={},n=[],o=m.SHA1=l.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=0;80>i;i++){if(16>i)n[i]=0|a[b+i];else{var j=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=j<<1|j>>>31}var k=(d<<5|d>>>27)+h+n[i];k+=20>i?(e&f|~e&g)+1518500249:40>i?(e^f^g)+1859775393:60>i?(e&f|e&g|f&g)-1894007588:(e^f^g)-899497514,h=g,g=f,f=e<<30|e>>>2,e=d,d=k}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+g|0,c[4]=c[4]+h|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;return c[e>>>5]|=128<<24-e%32,c[(e+64>>>9<<4)+14]=a.floor(d/4294967296),c[(e+64>>>9<<4)+15]=d,b.sigBytes=4*c.length,this._process(),this._hash},clone:function(){var a=l.clone.call(this);return a._hash=this._hash.clone(),a}});return c.SHA1=l._createHelper(o),c.HmacSHA1=l._createHmacHelper(o),c}(Math);!function(a){a.verbs={abandoned:{id:"http://purl.org/xapi/adl/verbs/abandoned",display:{"en-US":"abandoned"}},answered:{id:"http://adlnet.gov/expapi/verbs/answered",display:{"de-DE":"beantwortete","en-US":"answered","fr-FR":"a répondu","es-ES":"contestó"}},asked:{id:"http://adlnet.gov/expapi/verbs/asked",display:{"de-DE":"fragte","en-US":"asked","fr-FR":"a demandé","es-ES":"preguntó"}},attempted:{id:"http://adlnet.gov/expapi/verbs/attempted",display:{"de-DE":"versuchte","en-US":"attempted","fr-FR":"a essayé","es-ES":"intentó"}},attended:{id:"http://adlnet.gov/expapi/verbs/attended",display:{"de-DE":"nahm teil an","en-US":"attended","fr-FR":"a suivi","es-ES":"asistió"}},commented:{id:"http://adlnet.gov/expapi/verbs/commented",display:{"de-DE":"kommentierte","en-US":"commented","fr-FR":"a commenté","es-ES":"comentó"}},completed:{id:"http://adlnet.gov/expapi/verbs/completed",display:{"de-DE":"beendete","en-US":"completed","fr-FR":"a terminé","es-ES":"completó"}},exited:{id:"http://adlnet.gov/expapi/verbs/exited",display:{"de-DE":"verließ","en-US":"exited","fr-FR":"a quitté","es-ES":"salió"}},experienced:{id:"http://adlnet.gov/expapi/verbs/experienced",display:{"de-DE":"erlebte","en-US":"experienced","fr-FR":"a éprouvé","es-ES":"experimentó"}},failed:{id:"http://adlnet.gov/expapi/verbs/failed",display:{"de-DE":"verfehlte","en-US":"failed","fr-FR":"a échoué","es-ES":"fracasó"}},imported:{id:"http://adlnet.gov/expapi/verbs/imported",display:{"de-DE":"importierte","en-US":"imported","fr-FR":"a importé","es-ES":"importó"}},initialized:{id:"http://adlnet.gov/expapi/verbs/initialized",display:{"de-DE":"initialisierte","en-US":"initialized","fr-FR":"a initialisé","es-ES":"inicializó"}},interacted:{id:"http://adlnet.gov/expapi/verbs/interacted",display:{"de-DE":"interagierte","en-US":"interacted","fr-FR":"a interagi","es-ES":"interactuó"}},launched:{id:"http://adlnet.gov/expapi/verbs/launched",display:{"de-DE":"startete","en-US":"launched","fr-FR":"a lancé","es-ES":"lanzó"}},mastered:{id:"http://adlnet.gov/expapi/verbs/mastered",display:{"de-DE":"meisterte","en-US":"mastered","fr-FR":"a maîtrisé","es-ES":"dominó"}},passed:{id:"http://adlnet.gov/expapi/verbs/passed",display:{"de-DE":"bestand","en-US":"passed","fr-FR":"a réussi","es-ES":"aprobó"}},preferred:{id:"http://adlnet.gov/expapi/verbs/preferred",display:{"de-DE":"bevorzugte","en-US":"preferred","fr-FR":"a préféré","es-ES":"prefirió"}},progressed:{id:"http://adlnet.gov/expapi/verbs/progressed",display:{"de-DE":"machte Fortschritt mit","en-US":"progressed","fr-FR":"a progressé","es-ES":"progresó"}},registered:{id:"http://adlnet.gov/expapi/verbs/registered",display:{"de-DE":"registrierte","en-US":"registered","fr-FR":"a enregistré","es-ES":"registró"}},responded:{id:"http://adlnet.gov/expapi/verbs/responded",display:{"de-DE":"reagierte","en-US":"responded","fr-FR":"a répondu","es-ES":"respondió"}},resumed:{id:"http://adlnet.gov/expapi/verbs/resumed",display:{"de-DE":"setzte fort","en-US":"resumed","fr-FR":"a repris","es-ES":"continuó"}},satisfied:{id:"http://purl.org/xapi/adl/verbs/satisfied",display:{"en-US":"satisfied"}},scored:{id:"http://adlnet.gov/expapi/verbs/scored",display:{"de-DE":"erreichte","en-US":"scored","fr-FR":"a marqué","es-ES":"anotó"}},shared:{id:"http://adlnet.gov/expapi/verbs/shared",display:{"de-DE":"teilte","en-US":"shared","fr-FR":"a partagé","es-ES":"compartió"}},suspended:{id:"http://adlnet.gov/expapi/verbs/suspended",display:{"de-DE":"pausierte","en-US":"suspended","fr-FR":"a suspendu","es-ES":"aplazó"}},terminated:{id:"http://adlnet.gov/expapi/verbs/terminated",display:{"de-DE":"beendete","en-US":"terminated","fr-FR":"a terminé","es-ES":"terminó"}},voided:{id:"http://adlnet.gov/expapi/verbs/voided",display:{"de-DE":"entwertete","en-US":"voided","fr-FR":"a annulé","es-ES":"anuló"}},waived:{id:"http://purl.org/xapi/adl/verbs/waived",display:{"en-US":"waived"}}}}(window.ADL=window.ADL||{}),Date.prototype.toISOString||!function(){function a(a){var b=String(a);return 1===b.length&&(b="0"+b),b}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),"undefined"==typeof Array.isArray&&(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),function(a){function b(){try{return void 0!=this.lrs.endpoint&&""!=this.lrs.endpoint}catch(a){return!1}}function c(a){if(!c.debug)return!1;try{return console.log(a),!0}catch(b){return!1}}function d(a,b){for(var e in b){prop=b[e],c(e+" : "+prop);try{b[e].constructor==Object?a[e]=d(a[e],b[e]):(void 0==a&&(a=new Object),a[e]=b[e])}catch(f){void 0==a&&(a=new Object),a[e]=b[e]}}return a}function e(a){var b,c,e=["endpoint","auth","actor","registration","activity_id","grouping","activity_platform"],g=new Object;if(b=f(),void 0!==b&&0!==Object.keys(b).length){for(var h=0;h<e.length;h++)c=e[h],b[c]&&(g[c]=b[c],delete b[c]);0!==Object.keys(b).length&&(g.extended=b),g=d(a,g)}else g=a;return g}function f(){var a,b,c,d,e,f;if(a=window.location.href.split("?"),2===a.length)for(b=a[1],c=b.split("&"),f={},e=0;e<c.length;e++)d=c[e].split("="),2===d.length&&d[0]&&(f[d[0]]=decodeURIComponent(d[1]));return f}function g(){var b=new XMLHttpRequest,c=window.location+"?forcenocache="+a.ruuid();b.open("GET",c,!1),b.send(null)}function h(a,b,c,d){var e=b,f=new Array,g=e.indexOf("?");if(g>0&&(f.push(e.substr(g+1)),e=e.substr(0,g)),e=e+"?method="+a,null!==c)for(var h in c)f.push(h+"="+encodeURIComponent(c[h]));return null!==d&&f.push("content="+encodeURIComponent(d)),{method:"POST",url:e,headers:{},data:f.join("&")}}c.debug=!1;var i=function(){var a={};a.endpoint="http://localhost:8000/xapi/";try{a.auth="Basic "+toBase64("tom:1234")}catch(b){c("Exception in Config trying to encode auth: "+b)}return a}();XAPIWrapper=function(c,f){function g(a){this.lrs.user&&this.lrs.password&&i(this.lrs,this.lrs.user,this.lrs.password),this.base=h(this.lrs.endpoint),this.validator=a.validator,this.storage=a.storage,this.offline=a.offline,this.offline&&(this.offline.endpoint=this.lrs.endpoint);var b=this;if(this.offline&&this.storage){var c=this.offline.onlineCB||function(){};this.offline.on("online",function(){c();var a=setInterval(function(){if(!b.offline.isOffline()&&b.storage.hasStatements()){var c=b.storage.getStatements();Array.isArray(c)?b.sendStatements(c,function(){}):b.sendStatement(c,function(){})}else clearInterval(a)},b.offline._interval,b)})}}function h(b){var c=document.createElement("a");return c.href=b,c.protocol&&c.host?c.protocol+"//"+c.host:void a.XAPIWrapper.log("Couldn't create base url from endpoint: "+this.lrs.endpoint)}function i(a,b,c){a.auth="Basic "+toBase64(b+":"+c)}this.lrs=e(c||{}),g.call(this,c),f&&b.call(this)&&window.ADL.XHR_request(this.lrs,this.lrs.endpoint+"about","GET",null,null,function(b){if(200==b.status)try{var c=JSON.parse(b.response),d=!1;for(var e in c.version)if(c.version[e]==a.XAPIWrapper.xapiVersion){d=!0;break}d||a.XAPIWrapper.log("The lrs version ["+c.version+"] does not match this wrapper's XAPI version ["+a.XAPIWrapper.xapiVersion+"]")}catch(f){a.XAPIWrapper.log("The response was not an about object")}else a.XAPIWrapper.log("The request to get information about the LRS failed: "+b)}),this.searchParams=function(){var a={format:"exact"};return a},this.hash=function(b){if(!b)return null;try{return toSHA1(b)}catch(c){return a.XAPIWrapper.log("Error trying to hash -- "+c),null}},this.changeConfig=function(b){try{a.XAPIWrapper.log("updating lrs object with new configuration"),this.lrs=d(this.lrs,b),g.call(this,b)}catch(c){a.XAPIWrapper.log("error while changing configuration -- "+c)}},this.updateAuth=i},XAPIWrapper.prototype.xapiVersion="1.0.1",XAPIWrapper.prototype.prepareStatement=function(a){void 0===a.actor?a.actor=JSON.parse(this.lrs.actor):"string"==typeof a.actor&&(a.actor=JSON.parse(a.actor)),(this.lrs.grouping||this.lrs.registration||this.lrs.activity_platform)&&(a.context||(a.context={})),this.lrs.grouping&&(a.context.contextActivities||(a.context.contextActivities={}),a.context.contextActivities.grouping=[{id:this.lrs.grouping}]),this.lrs.registration&&(a.context.registration=this.lrs.registration),this.lrs.activity_platform&&(a.context.platform=this.lrs.activity_platform)},XAPIWrapper.prototype.testConfig=b,XAPIWrapper.prototype.log=c,XAPIWrapper.prototype.sendStatement=function(b,c){if(this.testConfig()){var d;if(b.id?d=b.id:(d=a.ruuid(),b.id=d),this.prepareStatement(b),this.validator){var e=this.validator.validateStatement(b);if(e.totalErrors>0)return c?void c({status:500,responseText:"validation errors",response:e},e):{xhr:{status:500,responseText:"validation errors",response:e}}}if(this.offline&&this.storage&&this.offline.isOffline()){this.storage.saveStatements(b);var f={xhr:{status:200,responseText:"Statement Saved"},id:d};return c?void c(f.xhr,f.id):f}var g=a.XHR_request(this.lrs,this.lrs.endpoint+"statements","POST",JSON.stringify(b),this.lrs.auth,c,{id:d});if(!c)return{xhr:g,id:d}}},XAPIWrapper.prototype.sendStatements=function(b,c){if(this.testConfig()){for(var d in b)this.prepareStatement(b[d]);if(this.validator){var e=this.validator.validateStatement(b);if(e.totalErrors>0)return c?void c({status:500,responseText:"validation errors",response:e},e):{status:500,responseText:"validation errors",response:e}}if(this.offline&&this.storage&&this.offline.isOffline()){this.storage.saveStatements(b);var f={xhr:{status:200,responseText:"Statements Saved"}};return c?void c(f.xhr,f.xhr.responseText):f}var g=a.XHR_request(this.lrs,this.lrs.endpoint+"statements","POST",JSON.stringify(b),this.lrs.auth,c);if(!c)return g}},XAPIWrapper.prototype.getStatements=function(b,c,d){if(this.testConfig()){var e=this.lrs.endpoint+"statements";if(c)e=this.base+c;else{var f=new Array;for(s in b)if("until"==s||"since"==s){var g=new Date(b[s]);f.push(s+"="+encodeURIComponent(g.toISOString()))}else f.push(s+"="+encodeURIComponent(b[s]));f.length>0&&(e=e+"?"+f.join("&"))}var h=a.XHR_request(this.lrs,e,"GET",null,this.lrs.auth,d);if(void 0===h||404==h.status)return null;try{return JSON.parse(h.response)}catch(i){return h.response}}},XAPIWrapper.prototype.getActivities=function(b,c){if(this.testConfig()){var d=this.lrs.endpoint+"activities?activityId=<activityid>";d=d.replace("<activityid>",encodeURIComponent(b));var e=a.XHR_request(this.lrs,d,"GET",null,this.lrs.auth,c,null,!0);if(void 0===e||404==e.status)return null;try{return JSON.parse(e.response)}catch(f){return e.response}}},XAPIWrapper.prototype.sendState=function(b,d,e,f,g,h,i,j){if(this.testConfig()){var k=this.lrs.endpoint+"activities/state?activityId=<activity ID>&agent=<agent>&stateId=<stateid>";k=k.replace("<activity ID>",encodeURIComponent(b)),k=k.replace("<agent>",encodeURIComponent(JSON.stringify(d))),k=k.replace("<stateid>",encodeURIComponent(e)),f&&(k+="&registration="+encodeURIComponent(f));var l=null;h&&i?c("Can't have both If-Match and If-None-Match"):h?l={"If-Match":'"'+h+'"'}:i&&(l={"If-None-Match":'"'+i+'"'});var m="PUT";if(!g)return this.log("No activity state was included."),!1;g instanceof Array?(g=JSON.stringify(g),l=l||{},l["Content-Type"]="application/json"):g instanceof Object?(g=JSON.stringify(g),l=l||{},l["Content-Type"]="application/json",m="POST"):(l=l||{},l["Content-Type"]="application/octet-stream"),a.XHR_request(this.lrs,k,m,g,this.lrs.auth,j,null,null,l)}},XAPIWrapper.prototype.getState=function(b,c,d,e,f,g){if(this.testConfig()){var h=this.lrs.endpoint+"activities/state?activityId=<activity ID>&agent=<agent>";h=h.replace("<activity ID>",encodeURIComponent(b)),h=h.replace("<agent>",encodeURIComponent(JSON.stringify(c))),d&&(h+="&stateId="+encodeURIComponent(d)),e&&(h+="&registration="+encodeURIComponent(e)),f&&(f=isDate(f),null!=f&&(h+="&since="+encodeURIComponent(f.toISOString())));var i=a.XHR_request(this.lrs,h,"GET",null,this.lrs.auth,g,null,!0);if(void 0===i||404==i.status)return null;try{return JSON.parse(i.response)}catch(j){return i.response}}},XAPIWrapper.prototype.deleteState=function(b,d,e,f,g,h,i){if(this.testConfig()){var j=this.lrs.endpoint+"activities/state?activityId=<activity ID>&agent=<agent>&stateId=<stateid>";j=j.replace("<activity ID>",encodeURIComponent(b)),j=j.replace("<agent>",encodeURIComponent(JSON.stringify(d))),j=j.replace("<stateid>",encodeURIComponent(e)),f&&(j+="&registration="+encodeURIComponent(f));var k=null;g&&h?c("Can't have both If-Match and If-None-Match"):g?k={"If-Match":'"'+g+'"'}:h&&(k={"If-None-Match":'"'+h+'"'});var l=a.XHR_request(this.lrs,j,"DELETE",null,this.lrs.auth,i,null,k);if(void 0===l||404==l.status)return null;try{return JSON.parse(l.response)}catch(m){return l}}},XAPIWrapper.prototype.sendActivityProfile=function(b,d,e,f,g,h){if(this.testConfig()){var i=this.lrs.endpoint+"activities/profile?activityId=<activity ID>&profileId=<profileid>";i=i.replace("<activity ID>",encodeURIComponent(b)),i=i.replace("<profileid>",encodeURIComponent(d));var j=null;f&&g?c("Can't have both If-Match and If-None-Match"):f?j={"If-Match":'"'+f+'"'}:g&&(j={"If-None-Match":'"'+g+'"'});var k="PUT";if(!e)return this.log("No activity profile was included."),!1;e instanceof Array?(e=JSON.stringify(e),j=j||{},j["Content-Type"]="application/json"):e instanceof Object?(e=JSON.stringify(e),j=j||{},j["Content-Type"]="application/json",k="POST"):(j=j||{},j["Content-Type"]="application/octet-stream"),a.XHR_request(this.lrs,i,k,e,this.lrs.auth,h,null,!1,j)}},XAPIWrapper.prototype.getActivityProfile=function(b,c,d,e){if(this.testConfig()){var f=this.lrs.endpoint+"activities/profile?activityId=<activity ID>";f=f.replace("<activity ID>",encodeURIComponent(b)),c&&(f+="&profileId="+encodeURIComponent(c)),d&&(d=isDate(d),null!=d&&(f+="&since="+encodeURIComponent(d.toISOString())));var g=a.XHR_request(this.lrs,f,"GET",null,this.lrs.auth,e,null,!0);if(void 0===g||404==g.status)return null;try{return JSON.parse(g.response)}catch(h){return g.response}}},XAPIWrapper.prototype.deleteActivityProfile=function(b,d,e,f,g){if(this.testConfig()){var h=this.lrs.endpoint+"activities/profile?activityId=<activity ID>&profileId=<profileid>";h=h.replace("<activity ID>",encodeURIComponent(b)),h=h.replace("<profileid>",encodeURIComponent(d));var i=null;e&&f?c("Can't have both If-Match and If-None-Match"):e?i={"If-Match":'"'+e+'"'}:f&&(i={"If-None-Match":'"'+f+'"'});var j=a.XHR_request(this.lrs,h,"DELETE",null,this.lrs.auth,g,null,i);if(void 0===j||404==j.status)return null;try{return JSON.parse(j.response)}catch(k){return j}}},XAPIWrapper.prototype.getAgents=function(b,c){if(this.testConfig()){var d=this.lrs.endpoint+"agents?agent=<agent>";d=d.replace("<agent>",encodeURIComponent(JSON.stringify(b)));var e=a.XHR_request(this.lrs,d,"GET",null,this.lrs.auth,c,null,!0);if(void 0===e||404==e.status)return null;try{return JSON.parse(e.response)}catch(f){return e.response}}},XAPIWrapper.prototype.sendAgentProfile=function(b,d,e,f,g,h){if(this.testConfig()){var i=this.lrs.endpoint+"agents/profile?agent=<agent>&profileId=<profileid>";i=i.replace("<agent>",encodeURIComponent(JSON.stringify(b))),i=i.replace("<profileid>",encodeURIComponent(d));var j=null;f&&g?c("Can't have both If-Match and If-None-Match"):f?j={"If-Match":'"'+f+'"'}:g&&(j={"If-None-Match":'"'+g+'"'});var k="PUT";if(!e)return this.log("No agent profile was included."),!1;e instanceof Array?(e=JSON.stringify(e),j=j||{},j["Content-Type"]="application/json"):e instanceof Object?(e=JSON.stringify(e),j=j||{},j["Content-Type"]="application/json",k="POST"):(j=j||{},j["Content-Type"]="application/octet-stream"),a.XHR_request(this.lrs,i,k,e,this.lrs.auth,h,null,!1,j)}},XAPIWrapper.prototype.getAgentProfile=function(b,c,d,e){if(this.testConfig()){var f=this.lrs.endpoint+"agents/profile?agent=<agent>";f=f.replace("<agent>",encodeURIComponent(JSON.stringify(b))),f=f.replace("<profileid>",encodeURIComponent(c)),c&&(f+="&profileId="+encodeURIComponent(c)),d&&(d=isDate(d),null!=d&&(f+="&since="+encodeURIComponent(d.toISOString())));var g=a.XHR_request(this.lrs,f,"GET",null,this.lrs.auth,e,null,!0);if(void 0===g||404==g.status)return null;try{return JSON.parse(g.response)}catch(h){return g.response}}},XAPIWrapper.prototype.deleteAgentProfile=function(b,d,e,f,g){if(this.testConfig()){var h=this.lrs.endpoint+"agents/profile?agent=<agent>&profileId=<profileid>";h=h.replace("<agent>",encodeURIComponent(JSON.stringify(b))),h=h.replace("<profileid>",encodeURIComponent(d));var i=null;e&&f?c("Can't have both If-Match and If-None-Match"):e?i={"If-Match":'"'+e+'"'}:f&&(i={"If-None-Match":'"'+f+'"'});var j=a.XHR_request(this.lrs,h,"DELETE",null,this.lrs.auth,g,null,i);if(void 0===j||404==j.status)return null;try{return JSON.parse(j.response)}catch(k){return j}}},a.ruuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},a.dateFromISOString=function(a){var b="([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T| ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",c=a.match(new RegExp(b)),d=0,e=new Date(c[1],0,1);c[3]&&e.setMonth(c[3]-1),c[5]&&e.setDate(c[5]),c[7]&&e.setHours(c[7]),c[8]&&e.setMinutes(c[8]),c[10]&&e.setSeconds(c[10]),c[12]&&e.setMilliseconds(1e3*Number("0."+c[12])),c[14]&&(d=60*Number(c[16])+Number(c[17]),d*="-"==c[15]?1:-1),d-=e.getTimezoneOffset(),time=Number(e)+60*d*1e3;var f=new Date;return f.setTime(Number(time)),f},a.XHR_request=function(b,c,d,e,f,i,j,k,l){"use strict";function m(){if(s)return q;s=!0;var b=k&&404===n.status;if(!(void 0===n.status||n.status>=200&&n.status<400||b)){var e;try{e="There was a problem communicating with the Learning Record Store. ( "+n.status+" | "+n.response+" )"+c}catch(f){e=f.toString()}return a.XAPIWrapper.log(e),a.xhrRequestOnError(n,d,c,i,j),q=n,n}if(!i)return q=n,n;if(j)i(n,j);else try{var g=JSON.parse(n.responseText);i(n,g)}catch(h){i(n,n.responseText)}}var n,o,p,q,r,s=!1,t=!1,u=!1,v=c.toLowerCase().match(/^(.+):\/\/([^:\/]*):?(\d+)?(\/.*)?$/),w=window.location,x={};if(x["Content-Type"]="application/json",x.Authorization=f,x["X-Experience-API-Version"]=a.XAPIWrapper.xapiVersion,null!==l)for(var y in l)x[y]=l[y];t=w.protocol.toLowerCase()!==v[1]||w.hostname.toLowerCase()!==v[2],t||(p=null===v[3]?"http"===v[1]?"80":"443":v[3],t=p===w.port);var z=window.XDomainRequest&&window.XMLHttpRequest&&void 0===(new XMLHttpRequest).responseType;if(t&&void 0!==z&&z!==!1)u=!0,o=h(d,c,x,e),n=new XDomainRequest,n.open(o.method,o.url);else{n=new XMLHttpRequest,n.open(d,c,null!=i);for(var y in x)n.setRequestHeader(y,x[y])}if(n.onreadystatechange=function(){return 4===n.readyState?m():void 0},n.onload=m,n.onerror=m,n.send(u?o.data:e),!i){if(u)for(r=1e3+new Date;new Date<r&&4!==n.readyState&&!s;)g();return m()}},a.xhrRequestOnError=function(){},a.XAPIWrapper=new XAPIWrapper(i,!1)}(window.ADL=window.ADL||{}),function(a){function b(a,c){var d=c.split("."),e=d[0];return c=d.slice(1).join("."),a[e]||(/\[\]$/.test(e)?(e=e.slice(0,-2),a[e]=[]):a[e]={}),c?b(a[e],c):a[e]}var c=function(b,c,j){if(b&&b.actor&&b.verb&&b.object){var k=b;for(var l in k)"actor"!=l&&"verb"!=l&&"object"!=l&&(this[l]=k[l]);b=k.actor,c=k.verb,j=k.object}b?b instanceof d?this.actor=b:"Agent"!==b.objectType&&b.objectType?"Group"===b.objectType&&(this.actor=new e(b)):this.actor=new d(b):this.actor=null,this.verb=c?c instanceof f?c:new f(c):null,this.object=j?"Activity"!==j.objectType&&j.objectType?"Agent"===j.objectType?j instanceof d?j:new d(j):"Group"===j.objectType?j instanceof e?j:new e(j):"StatementRef"===j.objectType?j instanceof h?j:new h(j):"SubStatement"===j.objectType?j instanceof i?j:new i(j):null:j instanceof g?j:new g(j):null,this.generateId=function(){this.id=a.ruuid()}};c.prototype.toString=function(){return this.actor.toString()+" "+this.verb.toString()+" "+this.object.toString()},c.prototype.isValid=function(){return this.actor&&this.actor.isValid()&&this.verb&&this.verb.isValid()&&this.object&&this.object.isValid()},c.prototype.generateRegistration=function(){b(this,"context").registration=a.ruuid()},c.prototype.addParentActivity=function(a){b(this,"context.contextActivities.parent[]").push(new g(a))},c.prototype.addGroupingActivity=function(a){b(this,"context.contextActivities.grouping[]").push(new g(a))},c.prototype.addOtherContextActivity=function(a){b(this,"context.contextActivities.other[]").push(new g(a))};var d=function(a,b){if(this.objectType="Agent",this.name=b,a&&(a.mbox||a.mbox_sha1sum||a.openid||a.account))for(var c in a)this[c]=a[c];else/^mailto:/.test(a)?this.mbox=a:/^[0-9a-f]{40}$/i.test(a)?this.mbox_sha1sum=a:/^http[s]?:/.test(a)?this.openid=a:a&&a.homePage&&a.name&&(this.account=a)};d.prototype.toString=function(){return this.name||this.mbox||this.openid||this.mbox_sha1sum||this.account.name},d.prototype.isValid=function(){return this.mbox||this.mbox_sha1sum||this.openid||this.account.homePage&&this.account.name||"Group"===this.objectType&&this.member};var e=function(a,b,c){d.call(this,a,c),this.member=b,this.objectType="Group"};e.prototype=new d;var f=function(a,b){if(a&&a.id)for(var c in a)this[c]=a[c];else this.id=a,b&&(this.display="string"==typeof b||b instanceof String?{"en-US":b}:b)};f.prototype.toString=function(){return this.display&&(this.display["en-US"]||this.display.en)?this.display["en-US"]||this.display.en:this.id},f.prototype.isValid=function(){return this.id};var g=function(a,b,c){if(a&&a.id){var d=a;for(var e in d)this[e]=d[e]}else this.objectType="Activity",this.id=a,(b||c)&&(this.definition={},"string"==typeof b||b instanceof String?this.definition.name={"en-US":b}:b&&(this.definition.name=b),"string"==typeof c||c instanceof String?this.definition.description={"en-US":c}:c&&(this.definition.description=c))};g.prototype.toString=function(){return this.definition&&this.definition.name&&(this.definition.name["en-US"]||this.definition.name.en)?this.definition.name["en-US"]||this.definition.name.en:this.id},g.prototype.isValid=function(){return this.id&&(!this.objectType||"Activity"===this.objectType)};var h=function(a){if(a&&a.id)for(var b in a)this[b]=a[b];else this.objectType="StatementRef",this.id=a};h.prototype.toString=function(){return"statement("+this.id+")"},h.prototype.isValid=function(){return this.id&&this.objectType&&"StatementRef"===this.objectType};var i=function(a,b,d){c.call(this,a,b,d),this.objectType="SubStatement",delete this.id,delete this.stored,delete this.version,delete this.authority};i.prototype=new c,i.prototype.toString=function(){return'"'+i.prototype.prototype.toString.call(this)+'"'},c.Agent=d,c.Group=e,c.Verb=f,c.Activity=g,c.StatementRef=h,c.SubStatement=i,a.XAPIStatement=c}(window.ADL=window.ADL||{}),function(a){var b=a;"undefined"!=typeof window&&(b=window.ADL=a.ADL||{});var c=function(a){return a.definition&&a.definition.name?a.definition.name[b.xapiutil.getLang()]:void 0};b.xapiutil={},b.xapiutil.getLang=function(){return"en-US"},b.xapiutil.getMoreStatements=function(a,c){var d=[];b.XAPIWrapper.getStatements(null,null,function e(f){if(f&&f.response){var g=JSON.parse(f.response);g.statements&&(d=d.concat(g.statements),a--<=0?c(d):g.more&&""!==g.more&&b.XAPIWrapper.getStatements(null,g.more,e))}})},b.xapiutil.getActorId=function(a){return a.mbox||a.openid||a.mbox_sha1sum||a.account},b.xapiutil.getActorIdString=function(a){var b=a.mbox||a.openid||a.mbox_sha1sum;return b||(b=a.account?a.account.homePage+":"+a.account.name:a.member?"Anon Group "+a.member:"unknown"),b},b.xapiutil.getActorDisplay=function(a){return a.name||b.xapiutil.getActorIdString(a)},b.xapiutil.getVerbDisplay=function(a){return a?a.display?a.display[b.xapiutil.getLang()]||a.id:a.id:void 0},b.xapiutil.getObjectType=function(a){return a.objectType||(a.id?"Activity":"Agent")},b.xapiutil.getObjectId=function(a){if(a.id)return a.id;var c=b.xapiutil.getObjectType(a);return"Agent"===c||"Group"==c?b.xapiutil.getActorId(a):void 0},b.xapiutil.getObjectIdString=function(a){if(a.id)return a.id;var c=b.xapiutil.getObjectType(a);return"Agent"===c||"Group"==c?b.xapiutil.getActorIdString(a):"SubStatement"==c?b.xapiutil.getActorId(a.actor)+":"+a.verb.id+":"+b.xapiutil.getObjectId(a.object):void 0},b.xapiutil.getObjectDisplay=function(a){var d=c(a)||a.name||a.id;if(!d){var e=b.xapiutil.getObjectType(a);"Agent"===e||"Group"==e?d=b.xapiutil.getActorDisplay(a):"SubStatement"==e&&(d=b.xapiutil.getActorId(a.actor)+":"+a.verb.id+":"+b.xapiutil.getObjectId(a.object))}return d}}(this),function(a){function b(a){var b=c(a),e=parseInt(b.checkInterval),f=parseInt(b.requestTimeout);this._isoffline,this.endpoint=b.endpoint||"http://localhost:8000/xapi/",this.offlineCB="function"==typeof b.onOffline?b.onOffline:null,this.onlineCB="function"==typeof b.onOnline?b.onOnline:null,this.startCheckingCB="function"==typeof b.onStartChecking?b.onStartChecking:null,this.stopCheckingCB="function"==typeof b.onStopChecking?b.onStopChecking:null,this._interval=!isNaN(e)&&e>=0?e:1e4,this._reqtimeout=!isNaN(f)&&f>=0?f:2e3,d(this),this._offlineCheckId=setInterval(d,this._interval,this)}b.prototype.setCheckInterval=function(a){return a>=0&&(this._interval=a,this.stopChecking(),this.startChecking()),this},b.prototype.startChecking=function(){return this._offlineCheckId?this:(this.startCheckingCB&&this.startCheckingCB(),d(this),this._offlineCheckId=setInterval(d,this._interval,this),this)},b.prototype.stopChecking=function(){return this._offlineCheckId?(this.stopCheckingCB&&this.stopCheckingCB(),clearInterval(this._offlineCheckId),this._offlineCheckId=null,this._isoffline=null,this):this},b.prototype.forceOfflineCheck=function(){return d(this),this},b.prototype.isOffline=function(){return this._isoffline},b.prototype.on=function(a,b){return"function"==typeof b&&("offline"===a?(this.offlineCB=b,this.isOffline()&&this.offlineCB()):"online"===a?(this.onlineCB=b,this.isOffline()||this.onlineCB()):"startChecking"===a?this.startCheckingCB=b:"stopChecking"===a&&(this.stopCheckingCB=b)),this};var c=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},d=function(a){var b=!0;if(navigator&&!navigator.onLine)e.call(a,b);else{var c=new(window.ActiveXObject||XMLHttpRequest)("Microsoft.XMLHTTP");c.open("HEAD",a.endpoint+"about?rand="+Math.floor(65536*(1+Math.random())),!0),c.onload=function(){4===c.readyState&&(c.status>=200&&c.status<400?e.call(a,!b):e.call(a,b))},c.onerror=function(){e.call(a,b)},c.ontimeout=function(){e.call(a,b)},c.timeout=a._reqtimeout,c.send()}},e=function(a){this._isoffline!=a&&(this._isoffline=a,this._isoffline&&this.offlineCB?this.offlineCB():this.onlineCB&&this.onlineCB())
};a.Offline=b}(window.ADL=window.ADL||{}),function(a){"use strict";function b(){this.length=8,this.timestamp=+new Date}function c(a){this.message=a,this.stack=(new Error).stack}function d(a){this.message=a,this.stack=(new Error).stack}function e(){if(!y())throw new c("local storage is not available");p()||o()}function f(a,b){this.queue=a||[],this.offset=b||0}Date.prototype.toISOString||!function(){function a(a){var b=String(a);return 1===b.length&&(b="0"+b),b}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),"undefined"==typeof Array.isArray&&(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),b.prototype._getRandomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},b.prototype.generate=function(){for(var a=this.timestamp.toString(),b=a.split("").reverse(),c="",d=0;d<this.length;++d){var e=this._getRandomInt(0,b.length-1);c+=b[e]}return c},Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;if(null===this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return-1;var f=+b||0;if(1/0===Math.abs(f)&&(f=0),f>=e)return-1;for(c=Math.max(f>=0?f:e-Math.abs(f),0);e>c;){if(c in d&&d[c]===a)return c;c++}return-1}),c.prototype=Object.create(Error.prototype),c.prototype.name="StorageNotDefined",d.prototype=Object.create(Error.prototype),d.prototype.name="StorageAtLimit";var g="size",h=475e4,i="ADL.Storage",j="keys",k="offset",l="stmts",m="meta";e.prototype.saveStatements=function(a){if(!z())throw new d("local storage is full");if(a){var c=(new b).generate();a=n(a);var e=JSON.stringify(a),f=p();return r(f,c,e),u(f,c),x(f,e.length),q(f),c}},e.prototype.getStatements=function(a){var b=a||w();if(b){var c=p(),d=s(c,b);return t(c,b),v(c,a),x(c,-1*d.length),q(c),JSON.parse(d)}},e.prototype.hasStatements=function(){var a=p();return new f(JSON.parse(a[m][j]),JSON.parse(a[m][k])).getLength()>0},e.prototype.clear=function(){o()},e.prototype.isStorageAvailable=function(){return y()&&z()},e.prototype.getStorageSize=function(){return h},e.prototype.getStorageUsed=function(){return parseInt(p()[m][g])},e.prototype.getStorageAvailable=function(){return h-this.getStorageUsed()};var n=function(a){var b="string"==typeof a;if(b&&(a=JSON.parse(a)),Array.isArray(a))for(var c in a)a[c].hasOwnProperty("timestamp")||(a[c].timestamp=(new Date).toISOString());else"object"==typeof a&&(a.hasOwnProperty("timestamp")||(a.timestamp=(new Date).toISOString()));return b&&(a=JSON.stringify(a)),a},o=function(){var a={};a[l]={},a[m]={},a[m][j]=JSON.stringify([]),a[m][k]=0,a[m][g]=2*JSON.stringify(localStorage).length,q(a)},p=function(){var a=localStorage.getItem(i);return a&&JSON.parse(a)},q=function(a){localStorage.setItem(i,JSON.stringify(a))},r=function(a,b,c){return a[l][b]=c,a},s=function(a,b){return a[l][b]},t=function(a,b){return delete a[l][b],a},u=function(a,b){var c=new f(JSON.parse(a[m][j]),JSON.parse(a[m][k]));return c.enqueue(b),a[m][j]=c.serialize(),a},v=function(a,b){var c=new f(JSON.parse(a[m][j]),JSON.parse(a[m][k]));return b?c.removeItem(b):c.dequeue(),a[m][j]=c.serialize(),a[m][k]=c.offset,a},w=function(){var a=p();return new f(JSON.parse(a[m][j]),JSON.parse(a[m][k])).peek()},x=function(a,b){return a[m][g]=parseInt(a[m][g])+2*b,a},y=function(){try{var a=window.localStorage,b="__storage_test__";return a.setItem(b,b),a.key(1),a.removeItem(b),!0}catch(c){return!1}},z=function(){return parseInt(p()[m][g])<h};f.prototype.getLength=function(){return this.queue.length-this.offset},f.prototype.isEmpty=function(){return 0==this.queue.length},f.prototype.removeItem=function(a){return!!this.queue.splice(this.queue.indexOf(a),1)},f.prototype.enqueue=function(a){this.queue.push(a)},f.prototype.dequeue=function(){if(0==this.queue.length)return void 0;var a=this.queue[this.offset];return 2*++this.offset>=this.queue.length&&(this.queue=this.queue.slice(this.offset),this.offset=0),a},f.prototype.peek=function(){return this.queue.length>0?this.queue[this.offset]:void 0},f.prototype.serialize=function(){return JSON.stringify(this.queue)},a.Storage=e,a.Storage.StorageNotDefined=c,a.Storage.StorageAtLimit=d}(window.ADL=window.ADL||{}),function(a){function b(){}function c(a){return"[object String]"===db.call(a)}function d(a){return"[object Object]"===db.call(a)}function e(a){return"[object Array]"===db.call(a)}function f(a){return a===!0||a===!1||"[object Boolean]"===db.call(a)}function g(a){return"[object Number]"===db.call(a)}function h(a){return null!==a&&d(a)&&!e(a)}function i(a){return void 0!==a&&null!==a&&c(a)&&cb.test(a)}function j(a){var b,c,d,e=[];if(null===a||void 0===a)return e;for(b=0;b<eb.length;b+=1)c=eb[b],d=a[c],void 0!==d&&null!==d&&e.push({key:c,value:d});return e}function k(a){return j(a).length}function l(a){return null!==a.member&&void 0!==a.member||"Group"===a.objectType}function m(a,b){return null!==b&&void 0!==b?a+"."+b:a}function n(a,b){return null===b||void 0===b?a:c(b)?a+'["'+b+'"]':a+"["+b+"]"}function o(a,b){return m(a,b)}function p(a,b){resultsArray=[],totalErrors=0;for(var c=0;c<a.length;c++){var d={},e=a[c].instance,f=a[c].errors;d.instance=null===e||void 0===e?null:e,d.errors=null===f||void 0===f?[]:f,d.version=b,resultsArray.push(d),totalErrors+=f.length}this.totalErrors=totalErrors,this.results=resultsArray}function q(a,b){this.trace=a,this.message=b}function r(a){return new p(a,"1.0.2")}function s(a,b){return r([{instance:a,errors:null===b||void 0===b?[]:[b]}])}function t(a){var b=[],c=[];if(d(a))V(a,"statement",b,!1),c.push({instance:a,errors:b});else for(var e=0;e<a.length;e++)V(a[e],"statement",b,!1),c.push({instance:a[e],errors:b}),b=[];return r(c)}function u(a,b,c,d){var e,f=d||[],g=c||"";for(e in a)a.hasOwnProperty(e)&&-1===b.indexOf(e)&&f.push(new q(m(g,e),"Unexpected property '"+e+"' not permitted"));return f}function v(a,b,d,e,f){var g=e||[],h=d||"",i=a[b];return void 0!==i?null!==i&&c(i)||g.push(new q(o(h,b),b+" property, if present, must be a string.")):f&&g.push(new q(o(h,b),b+" property was required to be a string but was absent.")),g}function w(a,b,d,e,f){var g=e||[],h=d||"",i=a[b];return void 0!==i?null!==i&&c(i)?ab.test(i)||g.push(new q(o(h,b),b+" property, if present, must be a IRI string.")):g.push(new q(o(h,b),b+" property, if present, must be an IRI string.")):f&&g.push(new q(o(h,b),b+" property was required to be a IRI string but was absent.")),g}function x(a,b,c,d,e){var g=d||[],h=c||"",i=a[b];return void 0!==i?null!==i&&f(i)||g.push(new q(o(h,b),b+" property, if present, must be a Boolean.")):e&&g.push(new q(o(h,b),b+" property was required to be a Boolean but was absent.")),g}function y(a,b,c,d,e){var f=d||[],h=c||"",i=a[b];return void 0!==i?null!==i&&g(i)||f.push(new q(o(h,b),b+" property, if present, must be a Number.")):e&&f.push(new q(o(h,b),b+" property was required to be a Number but was absent.")),f}function z(a,b,d){var e,f=d||[],g=b||"";return void 0!==a.mbox&&null!==a.mbox&&(c(a.mbox)?Y.test(a.mbox)||f.push(new q(o(g,"mbox"),"mbox property was required to be a mailto IRI string but did not match the mailto format.")):f.push(new q(o(g,"mbox"),"mbox property was required to be a mailto IRI string but was not a string at all."))),v(a,"mbox_sha1sum",g,f,!1),void 0!==a.mbox_sha1sum&&(_.test(a.mbox_sha1sum)||f.push(new q(o(g,"mbox_sha1sum"),"mbox_sha1sum property was required to be a sha1 value."))),w(a,"openID",g,f,!1),void 0!==a.account&&null!==a.account&&(e=m(g,"account"),w(a.account,"homePage",e,f,!0),v(a.account,"name",e,f,!0),u(a.account,["homePage","name"],e,f)),f}function A(a,b,d){var e=d||[],f=b||"extensions";if(void 0===a)return e;h(a)||e.push(new q(f,"If present, the extensions property must be a non-null map object."));var g=Object.keys(a);for(key in g)c(g[key])&&ab.test(g[key])||e.push(new q(f,g[key]+" key in extensions must be a valid IRI string."));return e}function B(a,b,d){var e,f,g=d||[],j=b||"languageMap";if(void 0===a)return g;if(!h(a))return g.push(new q(m(j),"Language Maps, when present, must be non-null map objects")),g;for(e in a)a.hasOwnProperty(e)&&(i(e)||g.push(new q(m(j,e),"Language Map key "+e+"does not conform to RFC 5646.")),f=a[e],null!==f&&void 0!==f&&c(f)||g.push(new q(n(j,e),"Language Map value for key "+e+"should be a String, but was not.")));return g}function C(a,b,c){var d=c||[],e=b||"actor";return null===a||void 0===a?(d.push(new q(o(e),"Actor must be provided.")),d):(l(a)?P(a,e,d):O(a,e,d),d)}function D(a,b,c){var d=c||[],e=b||"verb";return void 0===a?(d.push(new q(o(e),"verb property must be provided.")),d):h(a)?(w(a,"id",e,d,!0),void 0!==a.display&&B(a.display,m(e,"display"),d),u(a,["id","display"],e,d),d):(d.push(new q(o(e),"verb property value must a non-null map object.")),d)}function E(a,b,c,d,f){var g,i,j,k=f||[],l=d||"interactionComponents",o=-1!==c.indexOf(b),p=[];if(o&&void 0!==a)if(null!==a&&e(a))for(j=0;j<a.length;j+=1)g=a[j],i=n(l,j),h(g)?(v(g,"id",i,k,!0),-1!==p.indexOf(g.id)?k.push(new q(m(i,"id"),"id properties must be unique within each interaction component array")):p.push(g.id),B(g.description,m(i,"description"),k),u(g,["id","description"],i,k)):k.push(new q(i,"This interaction component collection member must be a non-null map object"));else k.push(new q(l,"This interaction component collection property must be an array."));else b&&a&&k.push(new q(l,"This interaction component collection property is not associated with the present interactionType of "+b));return k}function F(a,b,d){var f,g,i,j=d||[],k=b||"definition",l=m(k,"correctResponsesPattern");if(!h(a))return j.push(new q(m(k),"definitions, when present, must be map objects")),j;if(B(a.name,m(k,"name"),j),B(a.description,m(k,"description"),j),w(a,"type",k,j,!1),w(a,"moreInfo",k,j,!1),A(a.extensions,m(k,"extensions"),j),void 0!==a.interactionType&&-1===fb.indexOf(a.interactionType)&&j.push(new q(o(k,"interactionType"),"If present, the interactionType value must be a CMI interaction type option.")),void 0!==a.correctResponsesPattern)if(e(a.correctResponsesPattern))for(f=a.correctResponsesPattern.length,g=0;f>g;g+=1)i=a.correctResponsesPattern[g],null!==i&&void 0!==i&&c(i)||j.push(new q(n(l,g),"correctResponsesPattern items must be strings."));else j.push(new q(l,"If present, the correctResponsesPattern value must be an Array of strings."));return E(a.choices,a.interactionType,["choice","sequencing"],m(k,"choices"),j),E(a.scale,a.interactionType,["likert"],m(k,"scale"),j),E(a.source,a.interactionType,["matching"],m(k,"source"),j),E(a.target,a.interactionType,["matching"],m(k,"target"),j),E(a.steps,a.interactionType,["performance"],m(k,"steps"),j),u(a,["name","description","type","moreInfo","extensions","interactionType","correctResponsesPattern","choices","scale","source","target","steps"],k,j),j}function G(a,b,c){var d=c||[],e=b||"activity";return h(a)?(w(a,"id",e,d,!0),void 0!==a.definition&&F(a.definition,m(e,"definition"),d),u(a,["objectType","id","definition"],e,d),d):(d.push(new q(o(e),"Activities must be non-null map objects")),d)}function H(a,b,c){var d=c||[],e=b||"statementRef";return h(a)?("StatementRef"!==a.objectType&&d.push(new q(m(e,"objectType"),"objectType property value must be 'StatementRef' for statement reference objects.")),a.id&&W.test(a.id)||d.push(new q(m(e,"id"),"id property value must be a valid UUID string for statement reference objects.")),u(a,["id","objectType"],e,d),d):(d.push(new q(o(e),"StatementRef instances must be non-null map objects.")),d)}function I(a,b,c){var d=c||[],e=b||"score";return void 0===a?d:(y(a,"scaled",e,d,!1),void 0!==a.scaled&&(a.scaled<-1||a.scaled>1)&&d.push(new q(m(e,"scaled"),"If present, the scaled property value must be between -1 and 1")),void 0!==a.min&&(y(a,"min",e,d,!1),void 0!==a.raw&&a.raw<a.min&&d.push(new q(m(e,"raw"),"If both 'raw' and 'min' are present, the raw property value should be greater than min")),void 0!==a.max&&a.max<a.min&&d.push(new q(m(e,"max"),"If both 'max' and 'min' are present, the max property value should be greater than min"))),void 0!==a.max&&(y(a,"max",e,d,!1),void 0!==a.raw&&a.raw>a.max&&d.push(new q(m(e,"raw"),"If both 'raw' and 'max' are present, the raw property value should be less than max"))),y(a,"raw",e,d,!1),u(a,["scaled","raw","min","max"],e,d),d)}function J(a,b,d){var e=d||[],f=b||"result";return void 0===a?e:h(a)?(I(a.score,m(f,"score"),e),x(a,"success",f,e,!1),x(a,"completion",f,e,!1),v(a,"response",f,e,!1),A(a.extensions,m(f,"extensions"),e),void 0===a.duration||null!==a.duration&&c(a.duration)&&X.test(a.duration)||e.push(new q(m(f,"duration"),"If present, the duration property value must be an ISO 8601 duration")),u(a,["score","success","completion","response","duration","extensions"],f,e),e):(e.push(new q(m(f),"If present, the result must be a map object")),e)}function K(a,b,d,e){var f,g=e||[],h=d||"datetime",i=a[b];return void 0===i?g:null!==i&&c(i)?(f=bb.exec(i),f||g.push(new q(o(h,b),"This property's string value must be conformant to ISO 8601 for Date Times.")),g):(g.push(new q(o(h,b),"This property must be a string value, but was null or another value type.")),g)}function L(a,b,d){var e=d||[],f=b||"version";return void 0===a?e:(null!==a&&c(a)&&Z.test(a)||e.push(new q(o(f),"version must be a non-null string that complies with Semantic Versioning 1.0.0")),e)}function M(a,b,d){var e=d||[],f=b||"attachment";return h(a)?(void 0===a.display?e.push(new q(o(f,"display"),"display property must be provided.")):B(a.display,m(f,"display"),e),B(a.description,m(f,"description"),e),w(a,"usageType",f,e,!0),w(a,"fileUrl",f,e,!1),v(a,"contentType",f,e,!0),void 0!==a.length&&null!==a.length&&g(a.length)&&a.length%1===0||e.push(new q(o(f,"length"),"length property must be provided with an integer value")),void 0===a.sha2?e.push(new q(o(f,"sha2"),"sha2 property must be provided on attachment objects")):null!==a.sha2&&c(a.sha2)&&$.test(a.sha2)||e.push(new q(o(f,"sha2"),"sha2 property must contain a string with base64 contents")),u(a,["usageType","display","description","contentType","length","sha2","fileUrl"],f,e),e):(e.push(new q(o(f),"attachment instances must be non-null map objects.")),e)}function N(a,b,c){var d,f,g=c||[],h=b||"attachments";if(void 0===a)return g;if(null===a||!e(a))return g.push(new q(o(h),"attachments must be a non-null Array.")),g;for(d=a.length,f=0;d>f;f+=1)M(a[f],n(h,f),g);return g}function O(a,b,c){var d,e=c||[],f=b||"agent";return h(a)?(d=k(a),1!==d&&e.push(new q(o(f),"Exactly one Inverse Functional Identifier property must be specified.")),"Group"===a.objectType&&e.push(new q(o(f),"Invalid object with characteristics of a Group when an Agent was expected.")),z(a,f,e),v(a,"name",f,e,!1),u(a,["objectType","name"].concat(eb),f,e),e):(e.push(new q(o(f),"Agent must be a non-null map object")),e)}function P(a,b,c){var d,f,g,i=c||[],j=b||"group",l=m(j,"member");if(!h(a))return i.push(new q(o(j),"Group must be a non-null map object")),i;if(d=k(a),0===d?("Group"!==a.objectType&&i.push(new q(l,"objectType property must be provided and set to 'Group' for Anonymous Groups.")),(null===a.member||void 0===a.member)&&i.push(new q(l,"member property must be provided for Anonymous Groups."))):d>1&&i.push(new q(o(j),"Only one Inverse Functional Identifier property must be specified.")),z(a,j,i),v(a,"name",j,i,!1),void 0!==a.member)if(null!==a.member&&e(a.member))if(f=a.member.length,f>0)for(g=0;f>g;g+=1)O(a.member[g],n(l,g),i);else i.push(new q(o(j,"member"),"If present, the member property of a Group must contain members"));else i.push(new q(o(j,"member"),"If present, the member property of a Group must be an Array"));return u(a,["objectType","name","member"].concat(eb),j,i),i}function Q(a,b,c){var d=c||[],e=b||"authority";return void 0===a?d:h(a)?(l(a)?(P(a,e,d),a.member&&a.member.length&&2===a.member.length||d.push(new q(o(e,"member"),"If used as a Group, the authority property must contain a member property that is an array containing exactly two Agent objects."))):O(a,e,d),d):(d.push(new q(o(e),"If present, the authority property must be a non-null map object.")),d)}function R(a,b,c){var f,g,h=c||[],i=b||"subContext";if(void 0===a)return h;if(null===a)h.push(new q(o(i),"Context Activities property values must not be null."));else if(e(a))for(f=a.length,g=0;f>g;g+=1)G(a[g],n(i,g),h);else d(a)?G(a,i,h):h.push(new q(o(i),"Context Activities property values must be an array of Activity Objects or a single Activity Object."));return h}function S(a,b,c){var d=c||[],e=b||"contextActivities";return void 0===a?d:h(a)?(R(a.parent,m(e,"parent"),d),R(a.grouping,m(e,"grouping"),d),R(a.category,m(e,"category"),d),R(a.other,m(e,"other"),d),u(a,["parent","grouping","category","other"],e,d),d):(d.push(new q(o(e),"The Context Activities instances must be a non-null map object.")),d)}function T(a,b,d,e){var f=d||[],g=b||"context";return void 0===a?f:h(a)?(void 0===a.registration||null!==a.registration&&c(a.registration)&&W.test(a.registration)||f.push(new q(o(g,"registration"),"If present, the registration property must be a UUID string.")),-1===["Activity"].indexOf(e)&&(void 0!==a.revision&&f.push(new q(o(g,"revision"),"The revision property must only be used if the Statement Objects is an Activity")),void 0!==a.platform&&f.push(new q(o(g,"platform"),"The platform property must only be used if the Statement Objects is an Activity"))),v(a,"revision",g,f,!1),v(a,"platform",g,f,!1),void 0!==a.team&&P(a.team,m(g,"team"),f),void 0!==a.contextActivities&&S(a.contextActivities,m(g,"contextActivities"),f),void 0===a.language||i(a.language)||f.push(new q(o(g,"language"),"The language property must be encoded as an RFC 5646 compliant string, but was not.")),void 0!==a.statement&&H(a.statement,m(g,"statement"),f),void 0!==a.instructor&&(l(a.instructor)?P(a.instructor,m(g,"instructor"),f):O(a.instructor,m(g,"instructor"),f)),A(a.extensions,m(g,"extensions"),f),u(a,["registration","instructor","team","contextActivities","revision","platform","language","statement","extensions"],g,f),f):(f.push(new q(g,"If present, the context must be a non-null map object.")),f)}function U(a,b,c,d){var e,f=c||[],g=b||"object";return void 0===a?(f.push(new q(o(g),"object property must be provided.")),f):h(a)?(v(a,"objectType",g,f,!1),e=a.objectType||"Activity","Activity"===e?G(a,g,f):"Agent"===e?O(a,g,f):"Group"===e?P(a,g,f):"StatementRef"===e?H(a,g,f):"SubStatement"===e?(d&&f.push(new q(o(g,"objectType"),"A SubStatement must not contain a SubStatement")),V(a,g,f,!0)):f.push(new q(o(g,"objectType"),"object's objectType did not match a valid option ['Activity', 'Agent', 'Group', 'StatementRef', 'SubStatement']")),f):(f.push(new q(o(g),"object property must be a non-null map object.")),f)}function V(a,b,c,d){var e,f=c||[],g=b||"statement",i=["id","actor","verb","object","result","context","timestamp","authority","version","attachments"];return h(a)?(d?i=["actor","verb","object","result","context","timestamp","attachments","objectType"]:a.id&&(W.test(a.id)||f.push(new q(o(g,"id"),"Id was not a valid UUID"))),C(a.actor,m(g,"actor"),f),D(a.verb,m(g,"verb"),f),U(a.object,m(g,"object"),f,d),J(a.result,m(g,"result"),f),e=a.object&&a.object.objectType?a.object.objectType:"Activity",T(a.context,m(g,"context"),f,e),K(a,"timestamp",g,f),Q(a.authority,m(g,"authority"),f),L(a.version,m(g,"version"),f),N(a.attachments,m(g,"attachments"),f),u(a,i,g,f),f):(f.push(new q(o(g),"Statements must be non-null map objects")),f)}b.prototype.validateStatement=function(a){var b;if(void 0===a)return s(null,new q("statement","No statement argument provided."));if(null===a)return s(null,new q("statement","Null statement argument provided."));if(c(a)){try{if(b=JSON.parse(a),null===b||!d(b)&&!e(b))return s(b,new q("statement","Null or non-object statement value parsed from provided statment JSON."))}catch(f){return s(a,new q("statement","Invalid JSON. The statement could not be parsed: "+f.message))}return t(b)}return d(a)||e(a)?t(a):s(null,new q("statement","Statement argument provided was not a valid object, array or a valid JSON string."))};var W=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,X=/^P((\d+([\.,]\d+)?Y)?(\d+([\.,]\d+)?M)?(\d+([\.,]\d+)?W)?(\d+([\.,]\d+)?D)?)?(T(\d+([\.,]\d+)?H)?(\d+([\.,]\d+)?M)?(\d+([\.,]\d+)?S)?)?$/,Y=/(mailto)(:)([\w-+]+(?:\.[\w-+]+)*@(?:[\w-]+\.)+[a-zA-Z]{2,7})/i,Z=/^((\d+)\.(\d+)\.(\d+))(?:-([\dA-Za-z\-]+))?$/,$=/^(?:[A-Za-z0-9\+\/]{4})*(?:[A-Za-z0-9\+\/]{2}==|[A-Za-z0-9\+\/]{3}=|[A-Za-z0-9\+\/]{4})$/,_=/\b([a-f0-9]{40})\b/,ab=/^[a-z](?:[\-a-z0-9\+\.])*:(?:\/\/(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:])*@)?(?:\[(?:(?:(?:[0-9a-f]{1,4}:){6}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|::(?:[0-9a-f]{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4}:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+[\-a-z0-9\._~!\$&'\(\)\*\+,;=:]+)\]|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}|(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=@])*)(?::[0-9]*)?(?:\/(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*|\/(?:(?:(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*)?|(?:(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*|(?!(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])))(?:\?(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])|[\uE000-\uF8FF\uF0000-\uFFFFD|\u100000-\u10FFFD\/\?])*)?(?:\#(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])|[\/\?])*)?$/i,bb=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/,cb=/^(?:(en-GB-oed|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)|sgn-(?:BE-FR|BE-NL|CH-DE))|(art-lojban|cel-gaulish|no-(?:bok|nyn)|zh-(?:guoyu|hakka|min|min-nan|xiang)))$|^(x(?:-[0-9a-z]{1,8})+)$|^(?:((?:[a-z]{2,3}(?:(?:-[a-z]{3}){1,3})?)|[a-z]{4}|[a-z]{5,8})(?:-([a-z]{4}))?(?:-([a-z]{2}|[0-9]{3}))?((?:-(?:[a-z0-9]{5,8}|[0-9][a-z0-9]{3}))*)?((?:-[0-9a-wy-z](?:-[a-z0-9]{2,8}){1,})*)?(-x(?:-[0-9a-z]{1,8})+)?)$/i,db=Object.prototype.toString,eb=["mbox","mbox_sha1sum","openid","account"],fb=["true-false","choice","fill-in","long-fill-in","matching","performance","sequencing","likert","numeric","other"];a.Validator=b}(window.ADL=window.ADL||{});